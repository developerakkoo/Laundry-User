"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7564],{8217:(E,b,o)=>{o.d(b,{H:()=>f});var p=o(467),u=o(9417),e=o(3953),r=o(5374),y=o(8786),m=o(177);let f=(()=>{var _;class A{constructor(i,n,h,l){this.modalController=i,this.formBuilder=n,this.logic=h,this.toastController=l,this.form=this.formBuilder.group({address:["",[u.k0.required]],landmark:["",[u.k0.required]],pinCode:[,[u.k0.required]],type:[,[u.k0.required]],selected:[,[u.k0.required]]})}ngOnInit(){}close(){this.modalController.dismiss()}presentToast(){var i=this;return(0,p.A)(function*(){(yield i.toastController.create({message:"Your address Added!.",duration:2e3,animated:!0,mode:"ios",color:"primary"})).present()})()}onSubmit(){var i=this;return(0,p.A)(function*(){var n;i.form.valid&&(console.log({address:i.form.value.address,type:i.form.value.type,selected:i.form.value.isSelected,lat:18.454545,lng:18.454545}),i.logic.addUserAddress({address:i.form.value.address,landmark:i.form.value.landmark,pinCode:i.form.value.pinCode,type:i.form.value.type,selected:i.form.value.isSelected,lat:17.56567,lng:18.56565}).subscribe({next:(n=(0,p.A)(function*(h){console.log(h),i.presentToast(),i.close()}),function(l){return n.apply(this,arguments)}),error:function(){var n=(0,p.A)(function*(h){console.log(h.error.message)});return function(l){return n.apply(this,arguments)}}()}))})()}}return(_=A).\u0275fac=function(i){return new(i||_)(e.rXU(r.W3),e.rXU(u.ok),e.rXU(y.W),e.rXU(r.K_))},_.\u0275cmp=e.VBU({type:_,selectors:[["app-add-address"]],inputs:{value:"value",location:"location"},decls:38,vars:7,consts:[[1,"ion-no-border",3,"translucent"],["fill","clear","slot","end","color","primary",3,"click"],["slot","icon-only","name","close"],[1,"ion-padding",3,"fullscreen"],[1,"ion-padding"],[3,"ngSubmit","formGroup"],["color","medium","labelPlacement","stacked","label","Address","placeholder","XXXX XXXX XXXX XXX.","fill","outline","formControlName","address",1,"animate__animated","animate__fadeIn"],["color","primary","slot","start","name","home-outline","aria-hidden","true"],["type","text","fill","outline","label","Landmark","labelPlacement","stacked","formControlName","landmark"],["type","number","fill","outline","label","Pincode","labelPlacement","stacked","formControlName","pinCode"],["formControlName","type","value","home","interface","action-sheet","placeholder","Select Type"],["value","home"],["value","office"],["value","other"],["mode","ios","formControlName","selected","slot","end"],["expand","block","mode","ios","color","primary","type","submit",3,"disabled"]],template:function(i,n){1&i&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Enter address details"),e.k0s(),e.j41(4,"ion-button",1),e.bIt("click",function(){return n.close()}),e.nrm(5,"ion-icon",2),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-label",4)(8,"p"),e.EFF(9,"Your Address is"),e.k0s(),e.EFF(10),e.nI1(11,"uppercase"),e.k0s(),e.nrm(12,"br")(13,"br"),e.j41(14,"form",5),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(15,"ion-input",6),e.nrm(16,"ion-icon",7),e.k0s(),e.nrm(17,"br")(18,"ion-input",8)(19,"br")(20,"ion-input",9),e.j41(21,"ion-item")(22,"ion-label"),e.EFF(23,"Address Type"),e.k0s(),e.j41(24,"ion-select",10)(25,"ion-select-option",11),e.EFF(26,"Home"),e.k0s(),e.j41(27,"ion-select-option",12),e.EFF(28,"Office"),e.k0s(),e.j41(29,"ion-select-option",13),e.EFF(30,"Other"),e.k0s()()(),e.j41(31,"ion-item")(32,"ion-label"),e.EFF(33,"Set Default?"),e.k0s(),e.nrm(34,"ion-checkbox",14),e.k0s(),e.nrm(35,"br"),e.j41(36,"ion-button",15),e.EFF(37," Save "),e.k0s()()()),2&i&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(4),e.SpI(" ",e.bMT(11,5,n.value)," "),e.R7$(4),e.Y8G("formGroup",n.form),e.R7$(22),e.Y8G("disabled",n.form.invalid))},dependencies:[u.qT,u.BC,u.cb,r.Jm,r.eY,r.W9,r.eU,r.iq,r.$w,r.uz,r.he,r.Nm,r.Ip,r.BC,r.ai,r.hB,r.su,r.Je,r.Gw,u.j4,u.JD,m.Pc]}),A})()},7564:(E,b,o)=>{o.d(b,{m:()=>i});var p=o(467),u=o(8217),e=o(3953),r=o(5374),y=o(8786),m=o(8490),f=o(177);function _(n,h){1&n&&(e.j41(0,"div",8),e.nrm(1,"img",9),e.j41(2,"ion-text",10)(3,"p"),e.EFF(4,"You have no addresses added!"),e.k0s()()())}function A(n,h){if(1&n){const l=e.RV6();e.j41(0,"ion-item",12),e.bIt("click",function(){const d=e.eBV(l).$implicit,t=e.XpG(2);return e.Njj(t.setAddressDefault(d))}),e.nrm(1,"ion-icon",13),e.j41(2,"ion-label"),e.EFF(3),e.nI1(4,"titlecase"),e.j41(5,"p"),e.EFF(6),e.k0s()(),e.nrm(7,"ion-icon",14),e.k0s()}if(2&n){const l=h.$implicit;e.R7$(3),e.SpI(" ",e.bMT(4,2,l.type)," "),e.R7$(3),e.JRh(l.address)}}function s(n,h){if(1&n&&(e.j41(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),e.EFF(3,"Saved Addresses"),e.k0s()(),e.DNE(4,A,8,4,"ion-item",11),e.k0s()),2&n){const l=e.XpG();e.R7$(4),e.Y8G("ngForOf",l.address)}}let i=(()=>{var n;class h{constructor(c,d,t,a){this.modalController=c,this.loadingController=d,this.logic=t,this.storage=a,this.address=[],this.getAllAddress()}ngOnInit(){}getAllAddress(){var d,c=this;this.logic.getAllAddress().subscribe({next:(d=(0,p.A)(function*(t){console.log(t),c.address=t.data}),function(a){return d.apply(this,arguments)}),error:d=>{console.log(d)}})}close(){this.modalController.dismiss()}setAddressDefault(c){var d=this;return(0,p.A)(function*(){console.log(c),yield d.storage.set("address",c),d.modalController.dismiss(c)})()}openAddAddressPage(){var c=this;return(0,p.A)(function*(){const d=yield c.modalController.create({component:u.H});yield d.present();const t=yield d.onDidDismiss();console.log(t),c.getAllAddress()})()}}return(n=h).\u0275fac=function(c){return new(c||n)(e.rXU(r.W3),e.rXU(r.Xi),e.rXU(y.W),e.rXU(m.u))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-address"]],decls:13,vars:4,consts:[[1,"ion-no-border",3,"translucent"],["slot","end","fill","clear",3,"click"],["slot","icon-only","name","close"],[3,"fullscreen"],["class","container",4,"ngIf"],[4,"ngIf"],["color","primary",1,"ion-no-border"],["color","light","expand","block","fill","clear",3,"click"],[1,"container"],["src","assets/no-results.svg","alt","","srcset",""],["color","primary",1,"ion-text-center"],["lines","full",3,"click",4,"ngFor","ngForOf"],["lines","full",3,"click"],["color","primary","name","home-outline","slot","start"],["color","medium","name","pencil-outline","slot","end"]],template:function(c,d){1&c&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Select Address"),e.k0s(),e.j41(4,"ion-button",1),e.bIt("click",function(){return d.close()}),e.nrm(5,"ion-icon",2),e.k0s()()(),e.j41(6,"ion-content",3),e.DNE(7,_,5,0,"div",4)(8,s,5,1,"ion-list",5),e.k0s(),e.j41(9,"ion-footer")(10,"ion-toolbar",6)(11,"ion-button",7),e.bIt("click",function(){return d.openAddAddressPage()}),e.EFF(12," Add new address "),e.k0s()()()),2&c&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("ngIf",0==d.address.length),e.R7$(),e.Y8G("ngIf",d.address.length>0))},dependencies:[f.Sq,f.bT,r.Jm,r.W9,r.M0,r.eU,r.iq,r.uz,r.he,r.nf,r.AF,r.IO,r.BC,r.ai,f.PV]}),h})()},8786:(E,b,o)=>{o.d(b,{W:()=>h});var p=o(467),u=o(1626),e=o(4412),r=o(8810),y=o(8141),m=o(9437),f=o(7673),_=o(7468),A=o(6354);const s_URL="https://api.breezyemart.com/api/v1/";var i=o(3953),n=o(8490);let h=(()=>{var l;class c{constructor(t,a){this.http=t,this.storage=a,this.categories=[],this.address=[],this.laundriesByCategory=[],this.services=[],this.allLaundries=[],this.accessToken=new e.t(""),this.userId=new e.t(""),this.userProfileUpdated=new e.t(""),this.categoriesSubject=new e.t(this.categories),this.category$=this.categoriesSubject.asObservable(),this.addressSubject=new e.t(this.address),this.address$=this.addressSubject.asObservable(),this.laundriesByCategorySubject=new e.t([]),this.laundryByCategory$=this.laundriesByCategorySubject.asObservable(),this.servicesSubject=new e.t([]),this.allLaundriesSubject=new e.t([]),this.laundry$=this.allLaundriesSubject.asObservable(),this.init()}init(){var t=this;return(0,p.A)(function*(){let a=yield t.storage.get("accessToken"),v=yield t.storage.get("userId"),g=yield t.storage.get("profileUpdated");t.accessToken.next(a),t.userId.next(v),t.userProfileUpdated.next(g)})()}handleError(t){return console.error("An error occurred:",t.message),(0,r.$)("Something went wrong; please try again later.")}getUserId(){var t=this;return(0,p.A)(function*(){const a=yield t.storage.get("userId");if(a)return a;throw new Error("User Not Found in local Storgare")})()}register(t){return this.http.post(s_URL+"partner/register",t)}login(t){return this.http.post(s_URL+"user/login",t)}logout(){return this.http.get(s_URL+`user/logout?userId=${this.userId.value}`)}getUserProfile(){return this.http.get(s_URL+`user/get-current-user?userId=${this.userId.value}`)}updateUserProfile(t){return this.http.put(s_URL+`user/update-profile?userId=${this.userId.value}`,t)}getAllCategories(){this.http.get(s_URL+"partner/category/getAll").pipe((0,y.M)(t=>{console.log(t),this.categoriesSubject.next(t)}),(0,m.W)(this.handleError)).subscribe()}getAllAddress(){return this.http.get(s_URL+`user/get/all-address/${this.userId.value}`)}addUserAddress(t){return this.http.post(s_URL+`user/add-address?userId=${this.userId.value}`,t)}getUserAddress(){return this.http.get(s_URL+`user/get/all-address/${this.userId.value}`)}getLaundryByCategory(t,a,v,g){let U=(new u.Nl).set("categoryId","66a7496d1f27b4f5fb506c1d").set("userId",g).set("latitude",t).set("longitude",a);this.http.get(s_URL+"partner/shop/get-all",{params:U}).pipe((0,y.M)(I=>{console.log(I),this.laundriesByCategorySubject.next(I)}),(0,m.W)(this.handleError)).subscribe()}getServiceByLaundry(){let t=(new u.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");this.http.get(s_URL+"partner/shop/get/by/category",{params:t}).pipe((0,y.M)(a=>{console.log(a),this.allLaundriesSubject.next(a)}),(0,m.W)(this.handleError)).subscribe()}getAllLaundries(){let t=(new u.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");return this.http.get(s_URL+"partner/shop/get-all",{params:t})}getServiceByLaundryId(t){return this.http.get(s_URL+`partner/service/get/shopId/${t}`)}getAllOffers(){return this.http.get(s_URL+"admin/promoCode/get-all")}like(t){return this.http.post(s_URL+`partner/shop/like/${t}/${this.userId.value}`,{})}unlike(t){return this.http.post(s_URL+`partner/shop/unlike/${t}/${this.userId.value}`,{})}addToCart(t,a,v){return console.log(`Quantity added is in htttp ${a}`),this.http.post(s_URL+"cart/add",{userId:this.userId.value,quantity:a,serviceId:t,selectedQuantityType:v})}removeFromCart(t,a){return this.http.post(s_URL+"cart/remove",{userId:this.userId.value.toString(),quantity:a,serviceId:t})}fetchCartAndServices(t){const a=this.http.get(s_URL+`cart/${this.userId.value}`).pipe((0,m.W)(g=>(console.error("Cart fetch error:",g),(0,f.of)({data:{products:[]}})))),v=this.http.get(s_URL+`partner/service/get/shopId/${t}`).pipe((0,m.W)(g=>(console.error("Services fetch error:",g),(0,f.of)({data:{content:[]}}))));return(0,_.p)([a,v]).pipe((0,A.T)(([g,U])=>{const I=g.data.products||[];return(U.data.content||[]).map(R=>{const k=I.find(C=>C.serviceId._id===R._id);return{...R,quantity:k?k.quantity:0}})}))}getCart(){return this.http.get(s_URL+`cart/${this.userId.value}`)}checkout(t){return this.http.post(s_URL+"order/initiate/payment",{amount:t},{headers:{"x-access-token":this.accessToken.value.toString()}})}calculateCartAmount(t){return this.http.post(s_URL+"order/calculate/amount-to-pay",{userId:this.userId.value,code:t},{headers:{"x-access-token":this.accessToken.value}})}placeOrder(t,a,v,g,U,I,P,L){return this.http.post(s_URL+"order/place",{userId:this.userId.value,dropoffAddressId:t,pickupAddressId:a,pickupTime:v,dropoffTime:g,selfService:U,priceDetails:I,orderType:P,products:L})}getAllUserOrders(){return this.http.get(s_URL+`order/get/order/${this.userId.value}`)}getUserSubscription(){return this.http.get(s_URL+"subscription/get/all-plans")}getSubscriptionByUserId(){return this.http.get(s_URL+`subscription/get/${this.userId.value}`)}purchaseSubscription(t,a){return this.http.post(s_URL+"subscription/purchase",{userId:this.userId.value,planId:t,paymentDetails:a})}}return(l=c).\u0275fac=function(t){return new(t||l)(i.KVO(u.Qq),i.KVO(n.u))},l.\u0275prov=i.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}),c})()}}]);