"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9665],{8786:(V,j,n)=>{n.d(j,{W:()=>F});var b=n(467),m=n(1626),i=n(4412),v=n(8810),L=n(8141),f=n(9437),e=n(7673),C=n(7468),R=n(6354);const s_URL="https://api.breezyemart.com/api/v1/";var I=n(3953),w=n(8490);let F=(()=>{var p;class k{constructor(t,a){this.http=t,this.storage=a,this.categories=[],this.address=[],this.laundriesByCategory=[],this.services=[],this.allLaundries=[],this.accessToken=new i.t(""),this.userId=new i.t(""),this.categoriesSubject=new i.t(this.categories),this.category$=this.categoriesSubject.asObservable(),this.addressSubject=new i.t(this.address),this.address$=this.addressSubject.asObservable(),this.laundriesByCategorySubject=new i.t([]),this.laundryByCategory$=this.laundriesByCategorySubject.asObservable(),this.servicesSubject=new i.t([]),this.allLaundriesSubject=new i.t([]),this.laundry$=this.allLaundriesSubject.asObservable(),this.init()}init(){var t=this;return(0,b.A)(function*(){let a=yield t.storage.get("accessToken"),g=yield t.storage.get("userId");t.accessToken.next(a),t.userId.next(g)})()}handleError(t){return console.error("An error occurred:",t.message),(0,v.$)("Something went wrong; please try again later.")}getUserId(){var t=this;return(0,b.A)(function*(){const a=yield t.storage.get("userId");if(a)return a;throw new Error("User Not Found in local Storgare")})()}register(t){return this.http.post(s_URL+"partner/register",t)}login(t){return this.http.post(s_URL+"user/login",t)}getAllCategories(){this.http.get(s_URL+"partner/category/getAll").pipe((0,L.M)(t=>{console.log(t),this.categoriesSubject.next(t)}),(0,f.W)(this.handleError)).subscribe()}getAllAddress(){return this.http.get(s_URL+`user/get/all-address/${this.userId.value}`)}addUserAddress(t){return this.http.post(s_URL+`user/add-address?userId=${this.userId.value}`,t)}getUserAddress(){return this.http.get(s_URL+`user/get/all-address/${this.userId.value}`)}getLaundryByCategory(t,a,g,r){let c=(new m.Nl).set("categoryId","66a7496d1f27b4f5fb506c1d").set("userId",r).set("latitude",t).set("longitude",a);this.http.get(s_URL+"partner/shop/get-all",{params:c}).pipe((0,L.M)(u=>{console.log(u),this.laundriesByCategorySubject.next(u)}),(0,f.W)(this.handleError)).subscribe()}getServiceByLaundry(){let t=(new m.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");this.http.get(s_URL+"partner/shop/get/by/category",{params:t}).pipe((0,L.M)(a=>{console.log(a),this.allLaundriesSubject.next(a)}),(0,f.W)(this.handleError)).subscribe()}getAllLaundries(){let t=(new m.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");return this.http.get(s_URL+"partner/shop/get-all",{params:t})}getServiceByLaundryId(t){return this.http.get(s_URL+`partner/service/get/shopId/${t}`)}getAllOffers(){return this.http.get(s_URL+"admin/promoCode/get-all")}like(t){return this.http.post(s_URL+`partner/shop/like/${t}/${this.userId.value}`,{})}unlike(t){return this.http.post(s_URL+`partner/shop/unlike/${t}/${this.userId.value}`,{})}addToCart(t,a,g){return console.log(`Quantity added is in htttp ${a}`),this.http.post(s_URL+"cart/add",{userId:this.userId.value,quantity:a,serviceId:t,selectedQuantityType:g})}removeFromCart(t,a){return this.http.post(s_URL+"cart/remove",{userId:this.userId.value.toString(),quantity:a,serviceId:t})}fetchCartAndServices(t){const a=this.http.get(s_URL+`cart/${this.userId.value}`).pipe((0,f.W)(r=>(console.error("Cart fetch error:",r),(0,e.of)({data:{products:[]}})))),g=this.http.get(s_URL+`partner/service/get/shopId/${t}`).pipe((0,f.W)(r=>(console.error("Services fetch error:",r),(0,e.of)({data:{content:[]}}))));return(0,C.p)([a,g]).pipe((0,R.T)(([r,c])=>{const u=r.data.products||[];return(c.data.content||[]).map(d=>{const h=u.find(y=>y.serviceId._id===d._id);return{...d,quantity:h?h.quantity:0}})}))}getCart(){return this.http.get(s_URL+`cart/${this.userId.value}`)}checkout(t){return this.http.post(s_URL+"order/initiate/payment",{amount:t},{headers:{"x-access-token":this.accessToken.value.toString()}})}calculateCartAmount(t){return this.http.post(s_URL+"order/calculate/amount-to-pay",{userId:this.userId.value,code:t},{headers:{"x-access-token":this.accessToken.value}})}placeOrder(t,a,g,r,c,u,o){return this.http.post(s_URL+"order/place",{userId:this.userId.value,dropoffAddressId:t,pickupAddressId:a,pickupTime:g,dropoffTime:r,selfService:c,priceDetails:u,orderType:o})}getAllUserOrders(){return this.http.get(s_URL+`order/get-by/userId/${this.userId.value}`)}}return(p=k).\u0275fac=function(t){return new(t||p)(I.KVO(m.Qq),I.KVO(w.u))},p.\u0275prov=I.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),k})()},9665:(V,j,n)=>{n.r(j),n.d(j,{ViewLaundryPageModule:()=>g});var b=n(177),m=n(9417),i=n(5374),v=n(5260),L=n(467),f=n(617),e=n(3953),C=n(3455),R=n(8786),s=n(1518);const I=()=>[0,.25,.5,.45];function w(r,c){1&r&&(e.j41(0,"div",15),e.nrm(1,"img",16),e.k0s())}function F(r,c){if(1&r){const u=e.RV6();e.j41(0,"ion-list")(1,"ion-list-header")(2,"ion-label",17),e.EFF(3,"Top Laundries "),e.k0s()(),e.j41(4,"app-laundry-card",18),e.bIt("click",function(){e.eBV(u);const l=e.XpG();return e.Njj(l.openPage("/view-laundry/Washing/1/add"))}),e.k0s(),e.nrm(5,"app-laundry-card",19)(6,"app-laundry-card",19)(7,"app-laundry-card",19)(8,"app-laundry-card",19),e.k0s()}}function p(r,c){1&r&&(e.j41(0,"ion-content")(1,"ion-list")(2,"ion-list-header")(3,"ion-label",20),e.EFF(4,"Sort By"),e.k0s()(),e.nrm(5,"hr"),e.j41(6,"ion-radio-group",21)(7,"ion-item",22)(8,"ion-label",23),e.EFF(9,"Rating: High To Low"),e.k0s(),e.nrm(10,"ion-radio",24),e.k0s(),e.j41(11,"ion-item",22)(12,"ion-label",23),e.EFF(13,"Delivery time:High To Low"),e.k0s(),e.nrm(14,"ion-radio",24),e.k0s(),e.j41(15,"ion-item",22)(16,"ion-label",23),e.EFF(17,"Cost: High To Low"),e.k0s(),e.nrm(18,"ion-radio",24),e.k0s(),e.j41(19,"ion-item",22)(20,"ion-label",23),e.EFF(21,"Cost: Low To high"),e.k0s(),e.nrm(22,"ion-radio",24),e.k0s()()()())}const P=[{path:"",component:(()=>{var r;class c{constructor(o,l,d,h,y){this.router=o,this.haptics=l,this.route=d,this.logic=h,this.actionSheetController=y,this.swiperModules=[f.Jl],this.allLaundries=[],this.isLoading=!1,this.isFilterOpen=!0,this.title=this.route.snapshot.paramMap.get("name"),this.categoryId=this.route.snapshot.paramMap.get("id")}ngOnInit(){}ionViewDidEnter(){this.getLaundriesById()}handleRefresh(o){setTimeout(()=>{o.target.complete()},500)}getLaundriesById(){var l,o=this;this.logic.laundryByCategory$.subscribe({next:(l=(0,L.A)(function*(d){console.log("Fetching all laundries"),console.log(d),o.allLaundries=d.data}),function(h){return l.apply(this,arguments)}),error:function(){var l=(0,L.A)(function*(d){console.log(d)});return function(h){return l.apply(this,arguments)}}()})}onSearchChange(o){}openPage(o){this.router.navigate([o])}applyFilter(){this.haptics.hapticsImpactLight()}}return(r=c).\u0275fac=function(o){return new(o||r)(e.rXU(v.Ix),e.rXU(C.o),e.rXU(v.nX),e.rXU(R.W),e.rXU(i.GD))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-view-laundry"]],decls:27,vars:10,consts:[["modal",""],[1,"ion-no-border",3,"translucent"],["slot","start"],["defaultHref","/tabs/tab1"],["placeholder","Filter services","inputmode","decimal","type","decimal","mode","ios","showCancelButton","always",3,"ionChange","debounce"],[1,"filter-container"],[1,"filter-badge"],[1,"filter-badge-outline",3,"click"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["pullingIcon","arrow-down","pullingText","Pull to refresh","refreshingSpinner","circles","refreshingText","Refreshing..."],["class","loading-container",4,"ngIf"],[1,"container"],[4,"ngIf"],[1,"filter-modal",3,"isOpen","initialBreakpoint","breakpoints"],[1,"loading-container"],["src","assets/icon/laundry.gif",1,"loading-img"],[2,"font-size","16px","font-weight","500"],["imageUrl","assets/laundry-demo.svg","name","Location Name","ratings","4.5","address","123 Main St, City, Country",3,"click"],["imageUrl","assets/laundry-demo.svg","name","Location Name","ratings","4.5","address","123 Main St, City, Country"],[1,"nunito-bold"],["value","strawberries","mode","md"],["lines","none"],[1,"nutino-regular"],["slot","end"]],template:function(o,l){if(1&o){const d=e.RV6();e.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",2),e.nrm(5,"ion-back-button",3),e.k0s()(),e.j41(6,"ion-searchbar",4),e.bIt("ionChange",function(y){return e.eBV(d),e.Njj(l.onSearchChange(y))}),e.k0s(),e.j41(7,"div",5)(8,"div",6),e.EFF(9,"Filters"),e.k0s(),e.j41(10,"div",7),e.bIt("click",function(){return e.eBV(d),e.Njj(l.applyFilter())}),e.EFF(11,"Near me"),e.k0s(),e.j41(12,"div",7),e.bIt("click",function(){return e.eBV(d),e.Njj(l.applyFilter())}),e.EFF(13,"Fast Delivery"),e.k0s(),e.j41(14,"div",7),e.bIt("click",function(){return e.eBV(d),e.Njj(l.applyFilter())}),e.EFF(15,"5 Km's Radius"),e.k0s(),e.j41(16,"div",7),e.bIt("click",function(){return e.eBV(d),e.Njj(l.applyFilter())}),e.EFF(17,"Highest Rated"),e.k0s()()(),e.j41(18,"ion-content",8)(19,"ion-refresher",9),e.bIt("ionRefresh",function(y){return e.eBV(d),e.Njj(l.handleRefresh(y))}),e.nrm(20,"ion-refresher-content",10),e.k0s(),e.DNE(21,w,2,0,"div",11),e.j41(22,"div",12),e.DNE(23,F,9,0,"ion-list",13),e.k0s(),e.j41(24,"ion-modal",14,0),e.DNE(26,p,23,0,"ng-template"),e.k0s()()}2&o&&(e.Y8G("translucent",!1),e.R7$(3),e.JRh(l.title),e.R7$(3),e.Y8G("debounce",250),e.R7$(12),e.Y8G("fullscreen",!1),e.R7$(3),e.Y8G("ngIf",l.isLoading),e.R7$(2),e.Y8G("ngIf",!l.isLoading),e.R7$(),e.Y8G("isOpen",l.isFilterOpen)("initialBreakpoint",.45)("breakpoints",e.lJ4(9,I)))},dependencies:[b.bT,i.QW,i.W9,i.eU,i.uz,i.he,i.nf,i.AF,i.KO,i.f0,i.To,i.Ki,i.S1,i.BC,i.ai,i.Sb,i.Je,i.Gw,i.el,s.H],styles:[".container[_ngcontent-%COMP%]{margin-top:10px;display:flex;flex-direction:column;justify-content:center;align-items:center}ion-badge[_ngcontent-%COMP%]{padding:10px}.filter-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto;white-space:nowrap;padding:4px;background-color:#f0f0f04d;align-items:center}.filter-badge[_ngcontent-%COMP%]{display:flex;padding:10px 20px;margin:3px;background-color:#8f35c7;color:#fff;border-radius:20px;cursor:pointer;white-space:nowrap;flex-shrink:0;transition:background-color .3s ease;justify-content:center;align-items:center;height:30px;width:auto;font-size:12px}.filter-badge-outline[_ngcontent-%COMP%]{display:flex;padding:6px;margin:3px;border:1px solid #8F35C7;color:#8f35c7;border-radius:20px;cursor:pointer;white-space:nowrap;transition:background-color .3s ease;justify-content:center;align-items:center;height:30px;width:auto;font-size:12px}.filter-badge[_ngcontent-%COMP%]:hover{background-color:#8f35c7}.filter-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.filter-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f0f0f0}.filter-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#8f35c7;border-radius:10px;border:2px solid #f0f0f0}"]}),c})()},{path:"add/:id",loadChildren:()=>Promise.all([n.e(2076),n.e(6652)]).then(n.bind(n,6652)).then(r=>r.AddPageModule)},{path:"add-order-modal",loadChildren:()=>Promise.all([n.e(2076),n.e(7757)]).then(n.bind(n,7757)).then(r=>r.AddOrderModalPageModule)}];let t=(()=>{var r;class c{}return(r=c).\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[v.iI.forChild(P),v.iI]}),c})();var a=n(541);let g=(()=>{var r;class c{}return(r=c).\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[b.MD,m.YN,i.bv,a.G,t]}),c})()}}]);