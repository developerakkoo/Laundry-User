"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7564],{8217:(P,I,s)=>{s.d(I,{H:()=>v});var m=s(467),u=s(9417),e=s(3953),r=s(5374),A=s(8786),p=s(177);let v=(()=>{var g;class y{constructor(i,o,h,l){this.modalController=i,this.formBuilder=o,this.logic=h,this.toastController=l,this.form=this.formBuilder.group({address:["",[u.k0.required]],landmark:["",[u.k0.required]],pinCode:[,[u.k0.required]],type:[,[u.k0.required]],selected:[,[u.k0.required]]})}ngOnInit(){}close(){this.modalController.dismiss()}presentToast(){var i=this;return(0,m.A)(function*(){(yield i.toastController.create({message:"Your address Added!.",duration:2e3,animated:!0,mode:"ios",color:"primary"})).present()})()}onSubmit(){var i=this;return(0,m.A)(function*(){var o;i.form.valid&&(console.log({address:i.form.value.address,type:i.form.value.type,selected:i.form.value.isSelected,lat:18.454545,lng:18.454545}),i.logic.addUserAddress({address:i.form.value.address,landmark:i.form.value.landmark,pinCode:i.form.value.pinCode,type:i.form.value.type,selected:i.form.value.isSelected,lat:17.56567,lng:18.56565}).subscribe({next:(o=(0,m.A)(function*(h){console.log(h),i.presentToast(),i.close()}),function(l){return o.apply(this,arguments)}),error:function(){var o=(0,m.A)(function*(h){console.log(h.error.message)});return function(l){return o.apply(this,arguments)}}()}))})()}}return(g=y).\u0275fac=function(i){return new(i||g)(e.rXU(r.W3),e.rXU(u.ok),e.rXU(A.W),e.rXU(r.K_))},g.\u0275cmp=e.VBU({type:g,selectors:[["app-add-address"]],inputs:{value:"value",location:"location"},decls:38,vars:7,consts:[[1,"ion-no-border",3,"translucent"],["fill","clear","slot","end","color","primary",3,"click"],["slot","icon-only","name","close"],[1,"ion-padding",3,"fullscreen"],[1,"ion-padding"],[3,"ngSubmit","formGroup"],["color","medium","labelPlacement","stacked","label","Address","placeholder","XXXX XXXX XXXX XXX.","fill","outline","formControlName","address",1,"animate__animated","animate__fadeIn"],["color","primary","slot","start","name","home-outline","aria-hidden","true"],["type","text","fill","outline","label","Landmark","labelPlacement","stacked","formControlName","landmark"],["type","number","fill","outline","label","Pincode","labelPlacement","stacked","formControlName","pinCode"],["formControlName","type","value","home","interface","action-sheet","placeholder","Select Type"],["value","home"],["value","office"],["value","other"],["mode","ios","formControlName","selected","slot","end"],["expand","block","mode","ios","color","primary","type","submit",3,"disabled"]],template:function(i,o){1&i&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Enter address details"),e.k0s(),e.j41(4,"ion-button",1),e.bIt("click",function(){return o.close()}),e.nrm(5,"ion-icon",2),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-label",4)(8,"p"),e.EFF(9,"Your Address is"),e.k0s(),e.EFF(10),e.nI1(11,"uppercase"),e.k0s(),e.nrm(12,"br")(13,"br"),e.j41(14,"form",5),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(15,"ion-input",6),e.nrm(16,"ion-icon",7),e.k0s(),e.nrm(17,"br")(18,"ion-input",8)(19,"br")(20,"ion-input",9),e.j41(21,"ion-item")(22,"ion-label"),e.EFF(23,"Address Type"),e.k0s(),e.j41(24,"ion-select",10)(25,"ion-select-option",11),e.EFF(26,"Home"),e.k0s(),e.j41(27,"ion-select-option",12),e.EFF(28,"Office"),e.k0s(),e.j41(29,"ion-select-option",13),e.EFF(30,"Other"),e.k0s()()(),e.j41(31,"ion-item")(32,"ion-label"),e.EFF(33,"Set Default?"),e.k0s(),e.nrm(34,"ion-checkbox",14),e.k0s(),e.nrm(35,"br"),e.j41(36,"ion-button",15),e.EFF(37," Save "),e.k0s()()()),2&i&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(4),e.SpI(" ",e.bMT(11,5,o.value)," "),e.R7$(4),e.Y8G("formGroup",o.form),e.R7$(22),e.Y8G("disabled",o.form.invalid))},dependencies:[u.qT,u.BC,u.cb,r.Jm,r.eY,r.W9,r.eU,r.iq,r.$w,r.uz,r.he,r.Nm,r.Ip,r.BC,r.ai,r.hB,r.su,r.Je,r.Gw,u.j4,u.JD,p.Pc]}),y})()},7564:(P,I,s)=>{s.d(I,{m:()=>i});var m=s(467),u=s(8217),e=s(3953),r=s(5374),A=s(8786),p=s(8490),v=s(177);function g(o,h){1&o&&(e.j41(0,"div",8),e.nrm(1,"img",9),e.j41(2,"ion-text",10)(3,"p"),e.EFF(4,"You have no addresses added!"),e.k0s()()())}function y(o,h){if(1&o){const l=e.RV6();e.j41(0,"ion-item",12),e.bIt("click",function(){const d=e.eBV(l).$implicit,t=e.XpG(2);return e.Njj(t.setAddressDefault(d))}),e.nrm(1,"ion-icon",13),e.j41(2,"ion-label"),e.EFF(3),e.nI1(4,"titlecase"),e.j41(5,"p"),e.EFF(6),e.k0s()(),e.nrm(7,"ion-icon",14),e.k0s()}if(2&o){const l=h.$implicit;e.R7$(3),e.SpI(" ",e.bMT(4,2,l.type)," "),e.R7$(3),e.JRh(l.address)}}function n(o,h){if(1&o&&(e.j41(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),e.EFF(3,"Saved Addresses"),e.k0s()(),e.DNE(4,y,8,4,"ion-item",11),e.k0s()),2&o){const l=e.XpG();e.R7$(4),e.Y8G("ngForOf",l.address)}}let i=(()=>{var o;class h{constructor(c,d,t,a){this.modalController=c,this.loadingController=d,this.logic=t,this.storage=a,this.address=[],this.getAllAddress()}ngOnInit(){}getAllAddress(){var d,c=this;this.logic.getAllAddress().subscribe({next:(d=(0,m.A)(function*(t){console.log(t),c.address=t.data}),function(a){return d.apply(this,arguments)}),error:d=>{console.log(d)}})}close(){this.modalController.dismiss()}setAddressDefault(c){var d=this;return(0,m.A)(function*(){console.log(c),yield d.storage.set("address",c),d.modalController.dismiss(c)})()}openAddAddressPage(){var c=this;return(0,m.A)(function*(){const d=yield c.modalController.create({component:u.H});yield d.present();const t=yield d.onDidDismiss();console.log(t),c.getAllAddress()})()}}return(o=h).\u0275fac=function(c){return new(c||o)(e.rXU(r.W3),e.rXU(r.Xi),e.rXU(A.W),e.rXU(p.u))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-address"]],decls:13,vars:4,consts:[[1,"ion-no-border",3,"translucent"],["slot","end","fill","clear",3,"click"],["slot","icon-only","name","close"],[3,"fullscreen"],["class","container",4,"ngIf"],[4,"ngIf"],["color","primary",1,"ion-no-border"],["color","light","expand","block","fill","clear",3,"click"],[1,"container"],["src","assets/no-results.svg","alt","","srcset",""],["color","primary",1,"ion-text-center"],["lines","full",3,"click",4,"ngFor","ngForOf"],["lines","full",3,"click"],["color","primary","name","home-outline","slot","start"],["color","medium","name","pencil-outline","slot","end"]],template:function(c,d){1&c&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Select Address"),e.k0s(),e.j41(4,"ion-button",1),e.bIt("click",function(){return d.close()}),e.nrm(5,"ion-icon",2),e.k0s()()(),e.j41(6,"ion-content",3),e.DNE(7,g,5,0,"div",4)(8,n,5,1,"ion-list",5),e.k0s(),e.j41(9,"ion-footer")(10,"ion-toolbar",6)(11,"ion-button",7),e.bIt("click",function(){return d.openAddAddressPage()}),e.EFF(12," Add new address "),e.k0s()()()),2&c&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("ngIf",0==d.address.length),e.R7$(),e.Y8G("ngIf",d.address.length>0))},dependencies:[v.Sq,v.bT,r.Jm,r.W9,r.M0,r.eU,r.iq,r.uz,r.he,r.nf,r.AF,r.IO,r.BC,r.ai,v.PV]}),h})()},8786:(P,I,s)=>{s.d(I,{W:()=>h});var m=s(467),u=s(1626),e=s(4412),r=s(8810),A=s(8141),p=s(9437),v=s(7673),g=s(7468),y=s(6354);const n_URL="https://api.breezyemart.com/api/v1/";var i=s(3953),o=s(8490);let h=(()=>{var l;class c{constructor(t,a){this.http=t,this.storage=a,this.categories=[],this.address=[],this.laundriesByCategory=[],this.services=[],this.allLaundries=[],this.accessToken=new e.t(""),this.userId=new e.t(""),this.categoriesSubject=new e.t(this.categories),this.category$=this.categoriesSubject.asObservable(),this.addressSubject=new e.t(this.address),this.address$=this.addressSubject.asObservable(),this.laundriesByCategorySubject=new e.t([]),this.laundryByCategory$=this.laundriesByCategorySubject.asObservable(),this.servicesSubject=new e.t([]),this.allLaundriesSubject=new e.t([]),this.laundry$=this.allLaundriesSubject.asObservable(),this.init()}init(){var t=this;return(0,m.A)(function*(){let a=yield t.storage.get("accessToken"),f=yield t.storage.get("userId");t.accessToken.next(a),t.userId.next(f)})()}handleError(t){return console.error("An error occurred:",t.message),(0,r.$)("Something went wrong; please try again later.")}getUserId(){var t=this;return(0,m.A)(function*(){const a=yield t.storage.get("userId");if(a)return a;throw new Error("User Not Found in local Storgare")})()}register(t){return this.http.post(n_URL+"partner/register",t)}login(t){return this.http.post(n_URL+"user/login",t)}getAllCategories(){this.http.get(n_URL+"partner/category/getAll").pipe((0,A.M)(t=>{console.log(t),this.categoriesSubject.next(t)}),(0,p.W)(this.handleError)).subscribe()}getAllAddress(){return this.http.get(n_URL+`user/get/all-address/${this.userId.value}`)}addUserAddress(t){return this.http.post(n_URL+`user/add-address?userId=${this.userId.value}`,t)}getUserAddress(){return this.http.get(n_URL+`user/get/all-address/${this.userId.value}`)}getLaundryByCategory(t,a,f,_){let E=(new u.Nl).set("categoryId","66a7496d1f27b4f5fb506c1d").set("userId",_).set("latitude",t).set("longitude",a);this.http.get(n_URL+"partner/shop/get-all",{params:E}).pipe((0,A.M)(b=>{console.log(b),this.laundriesByCategorySubject.next(b)}),(0,p.W)(this.handleError)).subscribe()}getServiceByLaundry(){let t=(new u.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");this.http.get(n_URL+"partner/shop/get/by/category",{params:t}).pipe((0,A.M)(a=>{console.log(a),this.allLaundriesSubject.next(a)}),(0,p.W)(this.handleError)).subscribe()}getAllLaundries(){let t=(new u.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");return this.http.get(n_URL+"partner/shop/get-all",{params:t})}getServiceByLaundryId(t){return this.http.get(n_URL+`partner/service/get/shopId/${t}`)}getAllOffers(){return this.http.get(n_URL+"admin/promoCode/get-all")}like(t){return this.http.post(n_URL+`partner/shop/like/${t}/${this.userId.value}`,{})}unlike(t){return this.http.post(n_URL+`partner/shop/unlike/${t}/${this.userId.value}`,{})}addToCart(t,a,f){return console.log(`Quantity added is in htttp ${a}`),this.http.post(n_URL+"cart/add",{userId:this.userId.value,quantity:a,serviceId:t,selectedQuantityType:f})}removeFromCart(t,a){return this.http.post(n_URL+"cart/remove",{userId:this.userId.value.toString(),quantity:a,serviceId:t})}fetchCartAndServices(t){const a=this.http.get(n_URL+`cart/${this.userId.value}`).pipe((0,p.W)(_=>(console.error("Cart fetch error:",_),(0,v.of)({data:{products:[]}})))),f=this.http.get(n_URL+`partner/service/get/shopId/${t}`).pipe((0,p.W)(_=>(console.error("Services fetch error:",_),(0,v.of)({data:{content:[]}}))));return(0,g.p)([a,f]).pipe((0,y.T)(([_,E])=>{const b=_.data.products||[];return(E.data.content||[]).map(k=>{const L=b.find(C=>C.serviceId._id===k._id);return{...k,quantity:L?L.quantity:0}})}))}getCart(){return this.http.get(n_URL+`cart/${this.userId.value}`)}checkout(t){return this.http.post(n_URL+"order/initiate/payment",{amount:t},{headers:{"x-access-token":this.accessToken.value.toString()}})}calculateCartAmount(t){return this.http.post(n_URL+"order/calculate/amount-to-pay",{userId:this.userId.value,code:t},{headers:{"x-access-token":this.accessToken.value}})}placeOrder(t,a,f,_,E,b,U){return this.http.post(n_URL+"order/place",{userId:this.userId.value,dropoffAddressId:t,pickupAddressId:a,pickupTime:f,dropoffTime:_,selfService:E,priceDetails:b,orderType:U})}getAllUserOrders(){return this.http.get(n_URL+`order/get-by/userId/${this.userId.value}`)}}return(l=c).\u0275fac=function(t){return new(t||l)(i.KVO(u.Qq),i.KVO(o.u))},l.\u0275prov=i.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}),c})()}}]);