"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8999],{8786:(j,b,o)=>{o.d(b,{W:()=>R});var c=o(467),m=o(1626),d=o(4412),U=o(8810),g=o(8141),p=o(9437),y=o(7673),e=o(7468),P=o(6354);const n_URL="https://api.breezyemart.com/api/v1/";var v=o(3953),L=o(8490);let R=(()=>{var h;class I{constructor(t,r){this.http=t,this.storage=r,this.categories=[],this.address=[],this.laundriesByCategory=[],this.services=[],this.allLaundries=[],this.accessToken=new d.t(""),this.userId=new d.t(""),this.userProfileUpdated=new d.t(""),this.categoriesSubject=new d.t(this.categories),this.category$=this.categoriesSubject.asObservable(),this.addressSubject=new d.t(this.address),this.address$=this.addressSubject.asObservable(),this.laundriesByCategorySubject=new d.t([]),this.laundryByCategory$=this.laundriesByCategorySubject.asObservable(),this.servicesSubject=new d.t([]),this.allLaundriesSubject=new d.t([]),this.laundry$=this.allLaundriesSubject.asObservable(),this.init()}init(){var t=this;return(0,c.A)(function*(){let r=yield t.storage.get("accessToken"),l=yield t.storage.get("userId"),a=yield t.storage.get("profileUpdated");t.accessToken.next(r),t.userId.next(l),t.userProfileUpdated.next(a)})()}handleError(t){return console.error("An error occurred:",t.message),(0,U.$)("Something went wrong; please try again later.")}getUserId(){var t=this;return(0,c.A)(function*(){const r=yield t.storage.get("userId");if(r)return r;throw new Error("User Not Found in local Storgare")})()}register(t){return this.http.post(n_URL+"partner/register",t)}login(t){return this.http.post(n_URL+"user/login",t)}logout(){return this.http.get(n_URL+`user/logout?userId=${this.userId.value}`)}getUserProfile(){return this.http.get(n_URL+`user/get-current-user?userId=${this.userId.value}`)}updateUserProfile(t){return this.http.put(n_URL+`user/update-profile?userId=${this.userId.value}`,t)}getAllCategories(){this.http.get(n_URL+"partner/category/getAll").pipe((0,g.M)(t=>{console.log(t),this.categoriesSubject.next(t)}),(0,p.W)(this.handleError)).subscribe()}getAllAddress(){return this.http.get(n_URL+`user/get/all-address/${this.userId.value}`)}addUserAddress(t){return this.http.post(n_URL+`user/add-address?userId=${this.userId.value}`,t)}getUserAddress(){return this.http.get(n_URL+`user/get/all-address/${this.userId.value}`)}getLaundryByCategory(t,r,l,a){let s=(new m.Nl).set("categoryId","66a7496d1f27b4f5fb506c1d").set("userId",a).set("latitude",t).set("longitude",r);this.http.get(n_URL+"partner/shop/get-all",{params:s}).pipe((0,g.M)(i=>{console.log(i),this.laundriesByCategorySubject.next(i)}),(0,p.W)(this.handleError)).subscribe()}getServiceByLaundry(){let t=(new m.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");this.http.get(n_URL+"partner/shop/get/by/category",{params:t}).pipe((0,g.M)(r=>{console.log(r),this.allLaundriesSubject.next(r)}),(0,p.W)(this.handleError)).subscribe()}getAllLaundries(){let t=(new m.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");return this.http.get(n_URL+"partner/shop/get-all",{params:t})}getServiceByLaundryId(t){return this.http.get(n_URL+`partner/service/get/shopId/${t}`)}getAllOffers(){return this.http.get(n_URL+"admin/promoCode/get-all")}like(t){return this.http.post(n_URL+`partner/shop/like/${t}/${this.userId.value}`,{})}unlike(t){return this.http.post(n_URL+`partner/shop/unlike/${t}/${this.userId.value}`,{})}addToCart(t,r,l){return console.log(`Quantity added is in htttp ${r}`),this.http.post(n_URL+"cart/add",{userId:this.userId.value,quantity:r,serviceId:t,selectedQuantityType:l})}removeFromCart(t,r){return this.http.post(n_URL+"cart/remove",{userId:this.userId.value.toString(),quantity:r,serviceId:t})}fetchCartAndServices(t){const r=this.http.get(n_URL+`cart/${this.userId.value}`).pipe((0,p.W)(a=>(console.error("Cart fetch error:",a),(0,y.of)({data:{products:[]}})))),l=this.http.get(n_URL+`partner/service/get/shopId/${t}`).pipe((0,p.W)(a=>(console.error("Services fetch error:",a),(0,y.of)({data:{content:[]}}))));return(0,e.p)([r,l]).pipe((0,P.T)(([a,s])=>{const i=a.data.products||[];return(s.data.content||[]).map(S=>{const T=i.find($=>$.serviceId._id===S._id);return{...S,quantity:T?T.quantity:0}})}))}getCart(){return this.http.get(n_URL+`cart/${this.userId.value}`)}checkout(t){return this.http.post(n_URL+"order/initiate/payment",{amount:t},{headers:{"x-access-token":this.accessToken.value.toString()}})}calculateCartAmount(t){return this.http.post(n_URL+"order/calculate/amount-to-pay",{userId:this.userId.value,code:t},{headers:{"x-access-token":this.accessToken.value}})}placeOrder(t,r,l,a,s,i,u,f){return this.http.post(n_URL+"order/place",{userId:this.userId.value,dropoffAddressId:t,pickupAddressId:r,pickupTime:l,dropoffTime:a,selfService:s,priceDetails:i,orderType:u,products:f})}getAllUserOrders(){return this.http.get(n_URL+`order/get/order/${this.userId.value}`)}getUserSubscription(){return this.http.get(n_URL+"subscription/get/all-plans")}getSubscriptionByUserId(){return this.http.get(n_URL+`subscription/get/${this.userId.value}`)}purchaseSubscription(t,r){return this.http.post(n_URL+"subscription/purchase",{userId:this.userId.value,planId:t,paymentDetails:r})}}return(h=I).\u0275fac=function(t){return new(t||h)(v.KVO(m.Qq),v.KVO(L.u))},h.\u0275prov=v.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),I})()},8999:(j,b,o)=>{o.r(b),o.d(b,{Tab3PageModule:()=>t});var c=o(5374),m=o(177),d=o(9417),U=o(1307),g=o(5260),p=o(467),y=o(8359),e=o(3953),P=o(3455),n=o(8786),v=o(8490);let L=(()=>{var r;class l{constructor(){}ngOnInit(){}}return(r=l).\u0275fac=function(s){return new(s||r)},r.\u0275cmp=e.VBU({type:r,selectors:[["app-profile-card"]],inputs:{profileImageUrl:"profileImageUrl",userName:"userName",phoneNumber:"phoneNumber"},decls:9,vars:3,consts:[[1,"profile-card"],["alt","Profile Image",1,"profile-image",3,"src"],[1,"phone-number"],["ion-button","",1,"edit-button"],["name","create-outline"]],template:function(s,i){1&s&&(e.j41(0,"div",0),e.nrm(1,"img",1),e.j41(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"p",2),e.EFF(5),e.k0s(),e.j41(6,"button",3),e.nrm(7,"ion-icon",4),e.EFF(8," Edit Profile "),e.k0s()()),2&s&&(e.R7$(),e.Y8G("src",i.profileImageUrl,e.B4B),e.R7$(2),e.JRh(i.userName),e.R7$(2),e.JRh(i.phoneNumber))},dependencies:[c.iq],styles:[".profile-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:16px;background-color:#fff;text-align:center}.profile-image[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:10%;object-fit:cover;margin-bottom:16px}.profile-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:8px 0;font-size:1.5em}.phone-number[_ngcontent-%COMP%]{color:#888;margin-bottom:16px}.edit-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#e2e5f4;height:40px;border:none;padding:10px 20px;border-radius:10px;cursor:pointer}.edit-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:14px}.edit-button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]}),l})();const h=[{path:"",component:(()=>{var r;class l{constructor(s,i,u,f){this.router=s,this.haptics=i,this.logic=u,this.storage=f,this.getUserProfileSubscription=new y.yU,this.userProfile={}}ionViewDidEnter(){this.getUserProfile()}ionViewDidLeave(){this.getUserProfileSubscription.unsubscribe()}openPage(s){this.haptics.hapticsImpactLight(),this.router.navigate([s])}getUserProfile(){var s=this;return(0,p.A)(function*(){s.getUserProfileSubscription=s.logic.getUserProfile().subscribe({next:i=>{console.log(i),s.userProfile=i.data},error:i=>{console.log(i)}})})()}logout(){var s=this;return(0,p.A)(function*(){var i;s.logic.logout().subscribe({next:(i=(0,p.A)(function*(u){console.log(u),yield s.storage.clearAll(),s.router.navigate([""])}),function(f){return i.apply(this,arguments)}),error:function(){var i=(0,p.A)(function*(u){console.log(u)});return function(f){return i.apply(this,arguments)}}()})})()}}return(r=l).\u0275fac=function(s){return new(s||r)(e.rXU(g.Ix),e.rXU(P.o),e.rXU(n.W),e.rXU(v.u))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-tab3"]],decls:24,vars:3,consts:[[1,"ion-no-border",3,"translucent"],[3,"fullscreen"],["profileImageUrl","assets/icon/user.png","userName","Hello User!",1,"animate__animated","animate__fadeIn",3,"phoneNumber"],[1,"ion-padding","animate__animated","animate__fadeIn"],["detail","","lines","none",3,"click"],["color","primary","slot","start","name","today-outline"],["color","primary","slot","start","name","card-outline"],["color","primary","slot","start","name","help-outline"],["color","primary","slot","start","name","log-out-outline"]],template:function(s,i){1&s&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3," Profile "),e.k0s()()(),e.j41(4,"ion-content",1),e.nrm(5,"app-profile-card",2)(6,"br"),e.j41(7,"ion-list",3)(8,"ion-item",4),e.bIt("click",function(){return i.openPage("/myorder")}),e.nrm(9,"ion-icon",5),e.j41(10,"ion-label"),e.EFF(11,"My Orders"),e.k0s()(),e.j41(12,"ion-item",4),e.bIt("click",function(){return i.openPage("/subscriptions")}),e.nrm(13,"ion-icon",6),e.j41(14,"ion-label"),e.EFF(15,"Subscriptions"),e.k0s()(),e.j41(16,"ion-item",4),e.bIt("click",function(){return i.openPage("/helppage")}),e.nrm(17,"ion-icon",7),e.j41(18,"ion-label"),e.EFF(19,"Help"),e.k0s()(),e.j41(20,"ion-item",4),e.bIt("click",function(){return i.logout()}),e.nrm(21,"ion-icon",8),e.j41(22,"ion-label"),e.EFF(23,"Sign Out"),e.k0s()()()()),2&s&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("phoneNumber",i.userProfile.phoneNumber))},dependencies:[c.W9,c.eU,c.iq,c.uz,c.he,c.nf,c.BC,c.ai,L],styles:["ion-item[_ngcontent-%COMP%]{height:60px;--background: #F9F9F9;--border-radius: 12px;--padding:20px}"]}),l})()}];let I=(()=>{var r;class l{}return(r=l).\u0275fac=function(s){return new(s||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[g.iI.forChild(h),g.iI]}),l})();var C=o(541);let t=(()=>{var r;class l{}return(r=l).\u0275fac=function(s){return new(s||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[c.bv,m.MD,d.YN,C.G,U.S,I]}),l})()}}]);