"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1518],{1518:(I,v,a)=>{a.d(v,{H:()=>O});var d=a(467),t=a(3953),c=a(3455),C=a(8786),h=a(5260),g=a(177),_=a(5374);const b=()=>[1,2,3,4,5];function y(o,l){1&o&&t.nrm(0,"div",29)}function r(o,l){1&o&&(t.j41(0,"div",27),t.DNE(1,y,1,0,"div",28),t.k0s()),2&o&&(t.R7$(),t.Y8G("ngForOf",t.lJ4(1,b)))}function f(o,l){if(1&o&&(t.j41(0,"div",30)(1,"span"),t.EFF(2),t.k0s()()),2&o){const u=t.XpG();t.R7$(2),t.JRh(u.category)}}function P(o,l){if(1&o&&(t.j41(0,"div",31),t.nrm(1,"ion-icon",32),t.j41(2,"span"),t.EFF(3),t.k0s()()),2&o){const u=t.XpG();t.R7$(3),t.JRh(u.likes.length)}}let O=(()=>{var o;class l{constructor(e,n,i){this.haptics=e,this.logic=n,this.router=i,this.likes=[],this.categories=[],this.clickEvent=new t.bkB,this.isLiked=!1,this.isProcessing=!1}ngOnInit(){var e=this;return(0,d.A)(function*(){console.log(`UserId in Laundry Card Component:- ${e.currentUserId}`),e.likes&&e.currentUserId&&(e.isLiked=e.likes.includes(e.currentUserId)),console.log(`User Like Status:- ${e.isLiked} for ${e.id}`)})()}action(e){if("like"===e){if(this.isProcessing)return;console.log("Like action triggered"),this.haptics.hapticsImpactLight(),this.isLiked?this.unlikeShop():this.likeShop()}else"share"===e&&(console.log("Share action triggered"),this.haptics.hapticsImpactLight(),this.share())}likeShop(){var n,e=this;this.isProcessing=!0,this.logic.like(this.id).subscribe({next:(n=(0,d.A)(function*(i){console.log("Shop liked successfully:",i),e.isLiked=!0,e.likes.push(e.currentUserId),e.haptics.hapticsImpactMedium(),e.isProcessing=!1}),function(s){return n.apply(this,arguments)}),error:function(){var n=(0,d.A)(function*(i){console.error("Error liking shop:",i),e.isLiked=!1,e.isProcessing=!1});return function(s){return n.apply(this,arguments)}}()})}unlikeShop(){var n,e=this;this.isProcessing=!0,this.logic.unlike(this.id).subscribe({next:(n=(0,d.A)(function*(i){console.log("Shop unliked successfully:",i),e.isLiked=!1,e.likes=e.likes.filter(s=>s!==e.currentUserId),e.haptics.hapticsImpactLight(),e.isProcessing=!1}),function(s){return n.apply(this,arguments)}),error:function(){var n=(0,d.A)(function*(i){console.error("Error unliking shop:",i),e.isLiked=!0,e.isProcessing=!1});return function(s){return n.apply(this,arguments)}}()})}clickHandler(){this.haptics.hapticsImpactLight(),this.router.navigate(["view-laundry",this.name,this.id,"add",this.id]),this.clickEvent.emit({id:this.id,category:this.category})}share(){console.log("Share functionality - implement sharing logic here")}}return(o=l).\u0275fac=function(e){return new(e||o)(t.rXU(c.o),t.rXU(C.W),t.rXU(h.Ix))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-laundry-card"]],inputs:{imageUrl:"imageUrl",id:"id",name:"name",ratings:"ratings",address:"address",likes:"likes",currentUserId:"currentUserId",category:"category",categories:"categories"},outputs:{clickEvent:"clickEvent"},decls:33,vars:12,consts:[[1,"laundry-card"],[1,"card-image-container"],["alt","Laundry Image",1,"card-image",3,"src"],[1,"image-overlay"],[1,"action-buttons"],["type","button",1,"action-btn","like-btn",3,"click"],[1,"heart-container"],[1,"heart-icon",3,"name"],["class","heart-particles",4,"ngIf"],["type","button",1,"action-btn","share-btn",3,"click"],["name","share-outline",1,"share-icon"],["class","category-badge",4,"ngIf"],[1,"card-content",3,"click"],[1,"card-header"],[1,"laundry-info"],[1,"laundry-name"],[1,"rating-container"],["name","star",1,"star-icon"],[1,"rating-text"],[1,"rating-label"],["class","like-count",4,"ngIf"],[1,"card-footer"],[1,"location-info"],["name","location-outline",1,"location-icon"],[1,"address-text"],[1,"view-details"],["name","arrow-forward",1,"arrow-icon"],[1,"heart-particles"],["class","particle",4,"ngFor","ngForOf"],[1,"particle"],[1,"category-badge"],[1,"like-count"],["name","heart",1,"like-icon"]],template:function(e,n){1&e&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"img",2)(3,"div",3),t.j41(4,"div",4)(5,"button",5),t.bIt("click",function(){return n.action("like")}),t.j41(6,"div",6),t.nrm(7,"ion-icon",7),t.DNE(8,r,2,2,"div",8),t.k0s()(),t.j41(9,"button",9),t.bIt("click",function(){return n.action("share")}),t.nrm(10,"ion-icon",10),t.k0s()(),t.DNE(11,f,3,1,"div",11),t.k0s(),t.j41(12,"div",12),t.bIt("click",function(){return n.clickHandler()}),t.j41(13,"div",13)(14,"div",14)(15,"h3",15),t.EFF(16),t.k0s(),t.j41(17,"div",16),t.nrm(18,"ion-icon",17),t.j41(19,"span",18),t.EFF(20),t.k0s(),t.j41(21,"span",19),t.EFF(22,"Rating"),t.k0s()()(),t.DNE(23,P,4,1,"div",20),t.k0s(),t.j41(24,"div",21)(25,"div",22),t.nrm(26,"ion-icon",23),t.j41(27,"span",24),t.EFF(28),t.k0s()(),t.j41(29,"div",25)(30,"span"),t.EFF(31,"View Details"),t.k0s(),t.nrm(32,"ion-icon",26),t.k0s()()()()),2&e&&(t.AVh("liked",n.isLiked),t.R7$(2),t.Y8G("src",n.imageUrl,t.B4B),t.R7$(3),t.AVh("active",n.isLiked),t.R7$(2),t.Y8G("name",n.isLiked?"heart":"heart-outline"),t.R7$(),t.Y8G("ngIf",n.isLiked),t.R7$(3),t.Y8G("ngIf",n.category),t.R7$(5),t.JRh(n.name),t.R7$(4),t.JRh(n.ratings),t.R7$(3),t.Y8G("ngIf",n.likes&&n.likes.length>0),t.R7$(5),t.JRh(n.address))},dependencies:[g.Sq,g.bT,_.iq],styles:[".laundry-card[_ngcontent-%COMP%]{background:#fff;border-radius:24px;overflow:hidden;box-shadow:0 8px 32px #00000014;border:1px solid rgba(148,163,184,.1);transition:all .4s cubic-bezier(.4,0,.2,1);cursor:pointer;position:relative;margin-bottom:20px}.laundry-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 20px 48px #00000026}.laundry-card[_ngcontent-%COMP%]:hover   .card-image[_ngcontent-%COMP%]{transform:scale(1.05)}.laundry-card[_ngcontent-%COMP%]:hover   .view-details[_ngcontent-%COMP%], .laundry-card[_ngcontent-%COMP%]:hover   .view-details[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{transform:translate(4px)}.laundry-card.liked[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]{background:#ef44441a;border-color:#ef4444}.laundry-card.liked[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   .heart-icon[_ngcontent-%COMP%]{color:#ef4444;animation:_ngcontent-%COMP%_heartBeat .6s ease-in-out}.card-image-container[_ngcontent-%COMP%]{position:relative;height:200px;overflow:hidden}.card-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .4s ease}.image-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(180deg,#0000,#0000001a,#0003);pointer-events:none}.action-buttons[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;display:flex;flex-direction:column;gap:12px;z-index:10}.action-btn[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.3);border-radius:12px;width:44px;height:44px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.action-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:#fffffff2;box-shadow:0 8px 24px #00000026}.action-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.like-btn.active[_ngcontent-%COMP%]{background:#ef44441a;border-color:#ef4444}.like-btn.active[_ngcontent-%COMP%]   .heart-icon[_ngcontent-%COMP%]{color:#ef4444}.heart-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.heart-icon[_ngcontent-%COMP%]{font-size:20px;color:#64748b;transition:all .3s ease;z-index:2}.share-icon[_ngcontent-%COMP%]{font-size:20px;color:#3b82f6;transition:all .3s ease}.heart-particles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none}.particle[_ngcontent-%COMP%]{position:absolute;width:6px;height:6px;background:#ef4444;border-radius:50%;animation:_ngcontent-%COMP%_particleFloat 1.2s ease-out forwards}.particle[_ngcontent-%COMP%]:nth-child(1){top:50%;left:50%;animation-delay:0s}.particle[_ngcontent-%COMP%]:nth-child(2){top:50%;left:50%;animation-delay:.1s}.particle[_ngcontent-%COMP%]:nth-child(3){top:50%;left:50%;animation-delay:.2s}.particle[_ngcontent-%COMP%]:nth-child(4){top:50%;left:50%;animation-delay:.3s}.particle[_ngcontent-%COMP%]:nth-child(5){top:50%;left:50%;animation-delay:.4s}@keyframes _ngcontent-%COMP%_particleFloat{0%{opacity:1;transform:translate(-50%,-50%) scale(0)}50%{opacity:1;transform:translate(-50%,-50%) scale(1)}to{opacity:0;transform:translate(-50%,-50%) scale(0) translateY(-40px)}}@keyframes _ngcontent-%COMP%_heartBeat{0%{transform:scale(1)}25%{transform:scale(1.2)}50%{transform:scale(1.1)}75%{transform:scale(1.2)}to{transform:scale(1)}}.category-badge[_ngcontent-%COMP%]{position:absolute;top:16px;left:16px;background:#3b82f6e6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);color:#fff;padding:6px 12px;border-radius:12px;font-size:.75rem;font-weight:600;z-index:10;box-shadow:0 4px 12px #3b82f64d}.card-content[_ngcontent-%COMP%]{padding:20px}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.laundry-info[_ngcontent-%COMP%]{flex:1}.laundry-info[_ngcontent-%COMP%]   .laundry-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:#1e293b;margin:0 0 8px;line-height:1.3}.rating-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.rating-container[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{color:#fbbf24;font-size:16px}.rating-container[_ngcontent-%COMP%]   .rating-text[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1e293b}.rating-container[_ngcontent-%COMP%]   .rating-label[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;font-weight:500}.like-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;background:#ef44441a;padding:6px 10px;border-radius:12px;border:1px solid rgba(239,68,68,.2)}.like-count[_ngcontent-%COMP%]   .like-icon[_ngcontent-%COMP%]{color:#ef4444;font-size:14px}.like-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:#ef4444}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:16px;border-top:1px solid rgba(148,163,184,.1)}.location-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1}.location-info[_ngcontent-%COMP%]   .location-icon[_ngcontent-%COMP%]{color:#64748b;font-size:16px;flex-shrink:0}.location-info[_ngcontent-%COMP%]   .address-text[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;font-weight:500;line-height:1.4}.view-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#3b82f6;font-size:.875rem;font-weight:600;transition:all .3s ease}.view-details[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{font-size:14px;transition:transform .3s ease}.view-details[_ngcontent-%COMP%]:hover{color:#1d4ed8}@media (max-width: 768px){.laundry-card[_ngcontent-%COMP%]{margin-bottom:16px}.card-content[_ngcontent-%COMP%]{padding:16px}.action-buttons[_ngcontent-%COMP%]{top:12px;right:12px;gap:8px}.action-btn[_ngcontent-%COMP%]{width:40px;height:40px}.category-badge[_ngcontent-%COMP%]{top:12px;left:12px;padding:4px 10px;font-size:.7rem}.laundry-name[_ngcontent-%COMP%]{font-size:1rem}.rating-container[_ngcontent-%COMP%]   .rating-text[_ngcontent-%COMP%]{font-size:.8rem}.rating-container[_ngcontent-%COMP%]   .rating-label[_ngcontent-%COMP%]{font-size:.7rem}}@media (max-width: 480px){.card-image-container[_ngcontent-%COMP%]{height:180px}.card-content[_ngcontent-%COMP%]{padding:14px}.action-btn[_ngcontent-%COMP%]{width:36px;height:36px}.heart-icon[_ngcontent-%COMP%], .share-icon[_ngcontent-%COMP%]{font-size:18px}.laundry-name[_ngcontent-%COMP%]{font-size:.95rem}.view-details[_ngcontent-%COMP%]{font-size:.8rem}}.laundry-card[_ngcontent-%COMP%]:hover   .action-btn[_ngcontent-%COMP%]{transform:scale(1.05)}.laundry-card[_ngcontent-%COMP%]:hover   .category-badge[_ngcontent-%COMP%]{background:#3b82f6;transform:scale(1.05)}.laundry-card[_ngcontent-%COMP%]:focus-within{outline:2px solid #3b82f6;outline-offset:2px}.action-btn[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}.loading[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}*[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.laundry-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_cardEntrance .6s ease-out forwards}@keyframes _ngcontent-%COMP%_cardEntrance{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}"]}),l})()},8786:(I,v,a)=>{a.d(v,{W:()=>O});var d=a(467),t=a(1626),c=a(4412),C=a(8810),h=a(8141),g=a(9437),_=a(7673),b=a(7468),y=a(6354);const r_URL="http://localhost:3000/api/v1/";var f=a(3953),P=a(8490);let O=(()=>{var o;class l{constructor(e,n){this.http=e,this.storage=n,this.categories=[],this.address=[],this.laundriesByCategory=[],this.services=[],this.allLaundries=[],this.accessToken=new c.t(""),this.userId=new c.t(""),this.userProfileUpdated=new c.t(""),this.categoriesSubject=new c.t(this.categories),this.category$=this.categoriesSubject.asObservable(),this.addressSubject=new c.t(this.address),this.address$=this.addressSubject.asObservable(),this.laundriesByCategorySubject=new c.t([]),this.laundryByCategory$=this.laundriesByCategorySubject.asObservable(),this.servicesSubject=new c.t([]),this.allLaundriesSubject=new c.t([]),this.laundry$=this.allLaundriesSubject.asObservable(),this.init()}init(){var e=this;return(0,d.A)(function*(){let n=yield e.storage.get("accessToken"),i=yield e.storage.get("userId"),s=yield e.storage.get("profileUpdated");e.accessToken.next(n),e.userId.next(i),e.userProfileUpdated.next(s)})()}handleError(e){return console.error("An error occurred:",e.message),(0,C.$)("Something went wrong; please try again later.")}getUserId(){var e=this;return(0,d.A)(function*(){const n=yield e.storage.get("userId");if(n)return n;throw new Error("User Not Found in local Storgare")})()}register(e){return this.http.post(r_URL+"partner/register",e)}login(e){return this.http.post(r_URL+"user/login",e)}logout(){return this.http.get(r_URL+`user/logout?userId=${this.userId.value}`)}getUserProfile(){return this.http.get(r_URL+`user/get-current-user?userId=${this.userId.value}`)}updateUserProfile(e){return this.http.put(r_URL+`user/update-profile?userId=${this.userId.value}`,e)}getAllCategories(){this.http.get(r_URL+"partner/category/getAll").pipe((0,h.M)(e=>{console.log(e),this.categoriesSubject.next(e)}),(0,g.W)(this.handleError)).subscribe()}getAllAddress(){return this.http.get(r_URL+`user/get/all-address/${this.userId.value}`)}addUserAddress(e){return this.http.post(r_URL+`user/add-address?userId=${this.userId.value}`,e)}getUserAddress(){return this.http.get(r_URL+`user/get/all-address/${this.userId.value}`)}getLaundryByCategory(e,n,i,s){let m=(new t.Nl).set("categoryId","66a7496d1f27b4f5fb506c1d").set("userId",s).set("latitude",e).set("longitude",n);this.http.get(r_URL+"partner/shop/get-all",{params:m}).pipe((0,h.M)(p=>{console.log(p),this.laundriesByCategorySubject.next(p)}),(0,g.W)(this.handleError)).subscribe()}getServiceByLaundry(){let e=(new t.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");this.http.get(r_URL+"partner/shop/get/by/category",{params:e}).pipe((0,h.M)(n=>{console.log(n),this.allLaundriesSubject.next(n)}),(0,g.W)(this.handleError)).subscribe()}getAllLaundries(){let e=(new t.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");return this.http.get(r_URL+"partner/shop/get-all",{params:e})}getServiceByLaundryId(e){return this.http.get(r_URL+`partner/service/get/shopId/${e}`)}getAllOffers(){return this.http.get(r_URL+"admin/promoCode/get-all")}like(e){return this.http.post(r_URL+`partner/shop/like/${e}/${this.userId.value}`,{})}unlike(e){return this.http.post(r_URL+`partner/shop/unlike/${e}/${this.userId.value}`,{})}addToCart(e,n,i){return console.log(`Quantity added is in htttp ${n}`),this.http.post(r_URL+"cart/add",{userId:this.userId.value,quantity:n,serviceId:e,selectedQuantityType:i})}removeFromCart(e,n){return this.http.post(r_URL+"cart/remove",{userId:this.userId.value.toString(),quantity:n,serviceId:e})}fetchCartAndServices(e){const n=this.http.get(r_URL+`cart/${this.userId.value}`).pipe((0,g.W)(s=>(console.error("Cart fetch error:",s),(0,_.of)({data:{products:[]}})))),i=this.http.get(r_URL+`partner/service/get/shopId/${e}`).pipe((0,g.W)(s=>(console.error("Services fetch error:",s),(0,_.of)({data:{content:[]}}))));return(0,b.p)([n,i]).pipe((0,y.T)(([s,m])=>{const p=s.data.products||[];return(m.data.content||[]).map(k=>{const L=p.find(U=>U.serviceId._id===k._id);return{...k,quantity:L?L.quantity:0}})}))}getCart(){return this.http.get(r_URL+`cart/${this.userId.value}`)}checkout(e){return this.http.post(r_URL+"order/initiate/payment",{amount:e},{headers:{"x-access-token":this.accessToken.value.toString()}})}calculateCartAmount(e){return this.http.post(r_URL+"order/calculate/amount-to-pay",{userId:this.userId.value,code:e},{headers:{"x-access-token":this.accessToken.value}})}placeOrder(e,n,i,s,m,p,x,M){return this.http.post(r_URL+"order/place",{userId:this.userId.value,dropoffAddressId:e,pickupAddressId:n,pickupTime:i,dropoffTime:s,selfService:m,priceDetails:p,orderType:x,products:M})}getAllUserOrders(){return this.http.get(r_URL+`order/get/order/${this.userId.value}`)}getUserSubscription(){return this.http.get(r_URL+"subscription/get/all-plans")}getSubscriptionByUserId(){return this.http.get(r_URL+`subscription/get/${this.userId.value}`)}purchaseSubscription(e,n){return this.http.post(r_URL+"subscription/purchase",{userId:this.userId.value,planId:e,paymentDetails:n})}}return(o=l).\u0275fac=function(e){return new(e||o)(f.KVO(t.Qq),f.KVO(P.u))},o.\u0275prov=f.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),l})()}}]);