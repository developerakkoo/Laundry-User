"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9143],{9143:(O,I,c)=>{c.r(I),c.d(I,{MyorderPageModule:()=>m});var p=c(177),y=c(9417),i=c(5374),F=c(5260),e=c(3953),f=c(8786),R=c(3455);function M(r,a){1&r&&(e.j41(0,"p"),e.EFF(1,"Pending"),e.k0s())}function P(r,a){1&r&&(e.j41(0,"p"),e.EFF(1,"Confirmed"),e.k0s())}function s(r,a){1&r&&(e.j41(0,"p"),e.EFF(1,"Pickup started"),e.k0s())}function v(r,a){1&r&&(e.j41(0,"p"),e.EFF(1,"Order Picked Up"),e.k0s())}function U(r,a){1&r&&(e.j41(0,"p"),e.EFF(1,"In Process"),e.k0s())}function j(r,a){1&r&&(e.j41(0,"p"),e.EFF(1,"Ready For Delivery"),e.k0s())}function h(r,a){1&r&&(e.j41(0,"p"),e.EFF(1,"Delivery Started"),e.k0s())}function b(r,a){1&r&&(e.j41(0,"p"),e.EFF(1,"Order Delivered"),e.k0s())}function $(r,a){if(1&r&&(e.j41(0,"ion-item",23),e.nrm(1,"img",24),e.j41(2,"div",11)(3,"ion-label",12)(4,"p",13),e.EFF(5),e.k0s(),e.j41(6,"p",14),e.EFF(7),e.nI1(8,"currency"),e.k0s(),e.j41(9,"span"),e.EFF(10),e.k0s()()()()),2&r){const n=a.$implicit;e.R7$(),e.Y8G("src",n.serviceId.image_url,e.B4B),e.R7$(4),e.JRh(n.serviceId.name),e.R7$(2),e.SpI(" ",e.i5U(8,4,n.serviceId.perKgPrice,"INR")," "),e.R7$(3),e.SpI("X ",n.quantity,"")}}function t(r,a){if(1&r&&(e.j41(0,"ion-accordion",8)(1,"ion-item",9),e.nrm(2,"img",10),e.j41(3,"div",11)(4,"ion-label",12)(5,"p",13),e.EFF(6),e.k0s(),e.j41(7,"p",14),e.EFF(8),e.k0s()(),e.j41(9,"div",15)(10,"p",16),e.EFF(11),e.nI1(12,"date"),e.k0s()(),e.j41(13,"div",17),e.DNE(14,M,2,0,"p",18)(15,P,2,0,"p",18)(16,s,2,0,"p",18)(17,v,2,0,"p",18)(18,U,2,0,"p",18)(19,j,2,0,"p",18)(20,h,2,0,"p",18)(21,b,2,0,"p",18),e.k0s()()(),e.j41(22,"div",19)(23,"ion-list")(24,"ion-list-header")(25,"ion-label"),e.EFF(26,"Your Order Details"),e.k0s()(),e.DNE(27,$,11,7,"ion-item",20),e.k0s(),e.nrm(28,"br"),e.j41(29,"ion-item")(30,"ion-label"),e.EFF(31,"Subtotal"),e.k0s(),e.j41(32,"p",21),e.EFF(33),e.nI1(34,"currency"),e.k0s()(),e.j41(35,"ion-item")(36,"ion-label"),e.EFF(37,"Delivery"),e.k0s(),e.j41(38,"p",21),e.EFF(39),e.nI1(40,"currency"),e.k0s()(),e.j41(41,"ion-item")(42,"ion-label"),e.EFF(43,"Handling Fees"),e.k0s(),e.j41(44,"p",21),e.EFF(45),e.nI1(46,"currency"),e.k0s()(),e.j41(47,"ion-item")(48,"ion-label"),e.EFF(49,"(GST)"),e.k0s(),e.j41(50,"p",21),e.EFF(51),e.nI1(52,"currency"),e.k0s()(),e.j41(53,"ion-item")(54,"ion-label"),e.EFF(55,"Total"),e.k0s(),e.j41(56,"p",21),e.EFF(57),e.nI1(58,"currency"),e.k0s()(),e.nrm(59,"br"),e.j41(60,"ion-button",22),e.EFF(61," Help "),e.k0s()()()),2&r){const n=a.$implicit;e.R7$(6),e.JRh(n.orderId),e.R7$(2),e.SpI("",n.items.length," X"),e.R7$(3),e.JRh(e.i5U(12,17,n.createdAt,"shortDate")),e.R7$(3),e.Y8G("ngIf",0===n.status),e.R7$(),e.Y8G("ngIf",1===n.status),e.R7$(),e.Y8G("ngIf",2===n.status),e.R7$(),e.Y8G("ngIf",3===n.status),e.R7$(),e.Y8G("ngIf",4===n.status),e.R7$(),e.Y8G("ngIf",5===n.status),e.R7$(),e.Y8G("ngIf",6===n.status),e.R7$(),e.Y8G("ngIf",7===n.status),e.R7$(6),e.Y8G("ngForOf",n.items),e.R7$(6),e.SpI(" ",e.i5U(34,20,n.priceDetails.subtotal,"INR")," "),e.R7$(6),e.SpI(" ",e.i5U(40,23,n.priceDetails.deliveryCharges,"INR")," "),e.R7$(6),e.SpI(" ",e.i5U(46,26,n.priceDetails.platformFee,"INR")," "),e.R7$(6),e.SpI(" ",e.i5U(52,29,n.priceDetails.gstAmount,"INR"),"% "),e.R7$(6),e.SpI(" ",e.i5U(58,32,n.priceDetails.totalAmountToPay,"INR"),"% ")}}const u=[{path:"",component:(()=>{var r;class a{constructor(l,g){this.logic=l,this.haptics=g,this.isRecentOrder=!0,this.orders=[],this.isLoading=!1}ngOnInit(){}ionViewDidEnter(){this.getOrders()}getOrders(){this.logic.getAllUserOrders().subscribe({next:l=>{console.log(l),this.orders=l.value},error:l=>{console.log(l)}})}segmentChanged(l){console.log(l.detail.value);let g=l.detail.value;1===g?(console.log("Recent Orders"),this.isRecentOrder=!0):2===g&&(console.log("Previous Orders"),this.isRecentOrder=!1)}}return(r=a).\u0275fac=function(l){return new(l||r)(e.rXU(f.W),e.rXU(R.o))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-myorder"]],decls:17,vars:3,consts:[[1,"ion-no-border",3,"translucent"],["slot","start"],["defaultHref","/tabs/tabs/tab3"],[1,"ion-padding",3,"fullscreen"],["value","1",3,"ionChange"],["value","1"],["value","2"],["class","animate__animated animate__backInLeft",4,"ngFor","ngForOf"],[1,"animate__animated","animate__backInLeft"],["color","light","slot","header","lines","none","detail","",1,"ion-margin-top"],["crossorigin","anonymous","src","assets/washing.gif",1,"hotel-thumbnail"],[1,"hotel-item-container"],[1,"ion-margin-start"],[1,"title"],[1,"sub-title"],[1,"ion-margin-start","rating-container"],[1,"rating"],[1,"sort-badge","ion-margin-start"],[4,"ngIf"],["slot","content",1,"ion-padding"],["class","ion-margin-top",4,"ngFor","ngForOf"],["slot","end",1,"pricing"],["expand","block","fill","clear","shape","round"],[1,"ion-margin-top"],["crossorigin","anonymous",1,"hotel-thumbnail",3,"src"]],template:function(l,g){1&l&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"My Orders"),e.k0s(),e.j41(4,"ion-buttons",1),e.nrm(5,"ion-back-button",2),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-segment",4),e.bIt("ionChange",function(x){return g.segmentChanged(x)}),e.j41(8,"ion-segment-button",5)(9,"ion-label"),e.EFF(10,"Recent"),e.k0s()(),e.j41(11,"ion-segment-button",6)(12,"ion-label"),e.EFF(13,"Previous"),e.k0s()()(),e.j41(14,"ion-list")(15,"ion-accordion-group"),e.DNE(16,t,62,35,"ion-accordion",7),e.k0s()()()),2&l&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(10),e.Y8G("ngForOf",g.orders))},dependencies:[p.Sq,p.bT,i.xk,i.YH,i.Jm,i.QW,i.W9,i.eU,i.uz,i.he,i.nf,i.AF,i.Gp,i.eP,i.BC,i.ai,i.Je,i.el,p.oe,p.vh],styles:[".title[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.sub-title[_ngcontent-%COMP%]{font-size:18px}.pricing[_ngcontent-%COMP%]{color:#22a45d;font-size:15px;font-weight:700}.ion-item[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}ion-accordion[_ngcontent-%COMP%]{border-radius:12px}.hotel-thumbnail[_ngcontent-%COMP%]{height:80px;width:80px;border-radius:8px}.hotel-item-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center}ion-item[_ngcontent-%COMP%]   .rating-container[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{font-size:10px;margin:0}.rating[_ngcontent-%COMP%]{margin:0;font-size:14px}.rating-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:2px}.sub-title[_ngcontent-%COMP%]{font-size:12px}ion-icon[_ngcontent-%COMP%]{font-size:20px}.sort-badge[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#e7fff1;height:20px;width:57px;border-radius:2px;padding-left:10px;padding-right:10px;margin-top:6px}.sort-badge[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:#00c54f}ion-item[_ngcontent-%COMP%]:active{animation:scale-down-center .8s cubic-bezier(.25,.46,.45,.94) both}ion-chip[_ngcontent-%COMP%]{margin-right:10px}"]}),a})()}];let d=(()=>{var r;class a{}return(r=a).\u0275fac=function(l){return new(l||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[F.iI.forChild(u),F.iI]}),a})(),m=(()=>{var r;class a{}return(r=a).\u0275fac=function(l){return new(l||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[p.MD,y.YN,i.bv,d]}),a})()},8786:(O,I,c)=>{c.d(I,{W:()=>j});var p=c(467),y=c(1626),i=c(4412),F=c(8810),e=c(8141),f=c(9437),R=c(7673),M=c(7468),P=c(6354);const s_URL="https://api.breezyemart.com/api/v1/";var v=c(3953),U=c(8490);let j=(()=>{var h;class b{constructor(t,o){this.http=t,this.storage=o,this.categories=[],this.address=[],this.laundriesByCategory=[],this.services=[],this.allLaundries=[],this.accessToken=new i.t(""),this.userId=new i.t(""),this.userProfileUpdated=new i.t(""),this.categoriesSubject=new i.t(this.categories),this.category$=this.categoriesSubject.asObservable(),this.addressSubject=new i.t(this.address),this.address$=this.addressSubject.asObservable(),this.laundriesByCategorySubject=new i.t([]),this.laundryByCategory$=this.laundriesByCategorySubject.asObservable(),this.servicesSubject=new i.t([]),this.allLaundriesSubject=new i.t([]),this.laundry$=this.allLaundriesSubject.asObservable(),this.init()}init(){var t=this;return(0,p.A)(function*(){let o=yield t.storage.get("accessToken"),u=yield t.storage.get("userId"),d=yield t.storage.get("profileUpdated");t.accessToken.next(o),t.userId.next(u),t.userProfileUpdated.next(d)})()}handleError(t){return console.error("An error occurred:",t.message),(0,F.$)("Something went wrong; please try again later.")}getUserId(){var t=this;return(0,p.A)(function*(){const o=yield t.storage.get("userId");if(o)return o;throw new Error("User Not Found in local Storgare")})()}register(t){return this.http.post(s_URL+"partner/register",t)}login(t){return this.http.post(s_URL+"user/login",t)}logout(){return this.http.get(s_URL+`user/logout?userId=${this.userId.value}`)}getUserProfile(){return this.http.get(s_URL+`user/get-current-user?userId=${this.userId.value}`)}updateUserProfile(t){return this.http.put(s_URL+`user/update-profile?userId=${this.userId.value}`,t)}getAllCategories(){this.http.get(s_URL+"partner/category/getAll").pipe((0,e.M)(t=>{console.log(t),this.categoriesSubject.next(t)}),(0,f.W)(this.handleError)).subscribe()}getAllAddress(){return this.http.get(s_URL+`user/get/all-address/${this.userId.value}`)}addUserAddress(t){return this.http.post(s_URL+`user/add-address?userId=${this.userId.value}`,t)}getUserAddress(){return this.http.get(s_URL+`user/get/all-address/${this.userId.value}`)}getLaundryByCategory(t,o,u,d){let m=(new y.Nl).set("categoryId","66a7496d1f27b4f5fb506c1d").set("userId",d).set("latitude",t).set("longitude",o);this.http.get(s_URL+"partner/shop/get-all",{params:m}).pipe((0,e.M)(r=>{console.log(r),this.laundriesByCategorySubject.next(r)}),(0,f.W)(this.handleError)).subscribe()}getServiceByLaundry(){let t=(new y.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");this.http.get(s_URL+"partner/shop/get/by/category",{params:t}).pipe((0,e.M)(o=>{console.log(o),this.allLaundriesSubject.next(o)}),(0,f.W)(this.handleError)).subscribe()}getAllLaundries(){let t=(new y.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");return this.http.get(s_URL+"partner/shop/get-all",{params:t})}getServiceByLaundryId(t){return this.http.get(s_URL+`partner/service/get/shopId/${t}`)}getAllOffers(){return this.http.get(s_URL+"admin/promoCode/get-all")}like(t){return this.http.post(s_URL+`partner/shop/like/${t}/${this.userId.value}`,{})}unlike(t){return this.http.post(s_URL+`partner/shop/unlike/${t}/${this.userId.value}`,{})}addToCart(t,o,u){return console.log(`Quantity added is in htttp ${o}`),this.http.post(s_URL+"cart/add",{userId:this.userId.value,quantity:o,serviceId:t,selectedQuantityType:u})}removeFromCart(t,o){return this.http.post(s_URL+"cart/remove",{userId:this.userId.value.toString(),quantity:o,serviceId:t})}fetchCartAndServices(t){const o=this.http.get(s_URL+`cart/${this.userId.value}`).pipe((0,f.W)(d=>(console.error("Cart fetch error:",d),(0,R.of)({data:{products:[]}})))),u=this.http.get(s_URL+`partner/service/get/shopId/${t}`).pipe((0,f.W)(d=>(console.error("Services fetch error:",d),(0,R.of)({data:{content:[]}}))));return(0,M.p)([o,u]).pipe((0,P.T)(([d,m])=>{const r=d.data.products||[];return(m.data.content||[]).map(l=>{const g=r.find(C=>C.serviceId._id===l._id);return{...l,quantity:g?g.quantity:0}})}))}getCart(){return this.http.get(s_URL+`cart/${this.userId.value}`)}checkout(t){return this.http.post(s_URL+"order/initiate/payment",{amount:t},{headers:{"x-access-token":this.accessToken.value.toString()}})}calculateCartAmount(t){return this.http.post(s_URL+"order/calculate/amount-to-pay",{userId:this.userId.value,code:t},{headers:{"x-access-token":this.accessToken.value}})}placeOrder(t,o,u,d,m,r,a,n){return this.http.post(s_URL+"order/place",{userId:this.userId.value,dropoffAddressId:t,pickupAddressId:o,pickupTime:u,dropoffTime:d,selfService:m,priceDetails:r,orderType:a,products:n})}getAllUserOrders(){return this.http.get(s_URL+`order/get/order/${this.userId.value}`)}getUserSubscription(){return this.http.get(s_URL+"subscription/get/all-plans")}getSubscriptionByUserId(){return this.http.get(s_URL+`subscription/get/${this.userId.value}`)}purchaseSubscription(t,o){return this.http.post(s_URL+"subscription/purchase",{userId:this.userId.value,planId:t,paymentDetails:o})}}return(h=b).\u0275fac=function(t){return new(t||h)(v.KVO(y.Qq),v.KVO(U.u))},h.\u0275prov=v.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),b})()}}]);