"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3485],{3485:($,y,i)=>{i.r(y),i.d(y,{LoginPageModule:()=>R});var m=i(177),l=i(9417),a=i(5374),v=i(5260),p=i(467),e=i(3953),L=i(8490),C=i(3455),x=i(8786);const s=["input"];function f(t,n){if(1&t){const o=e.RV6();e.j41(0,"div",19)(1,"ion-button",20),e.bIt("click",function(){e.eBV(o);const u=e.XpG();return e.Njj(u.getOTP())}),e.EFF(2," Continue "),e.nrm(3,"ion-icon",21),e.k0s()()}if(2&t){const o=e.XpG();e.R7$(),e.Y8G("disabled",o.form.invalid)}}function P(t,n){if(1&t){const o=e.RV6();e.j41(0,"div",19)(1,"ion-button",20),e.bIt("click",function(){e.eBV(o);const u=e.XpG();return e.Njj(u.getOTP())}),e.nrm(2,"ion-spinner",22),e.k0s()()}if(2&t){const o=e.XpG();e.R7$(),e.Y8G("disabled",o.form.invalid)}}const c=[{path:"",component:(()=>{var t;class n{constructor(r,u,d,g,h,I,U){this.router=r,this.data=u,this.haptics=d,this.LoadingCtrl=g,this.logic=h,this.toastController=I,this.formBuilder=U,this.form=l.gE,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({phoneNumber:["",[l.k0.required,l.k0.pattern("^((\\+91-?)|0)?[0-9]{10}$")]]})}ionViewDidEnter(){this.input.setFocus()}login(){var r=this;return(0,p.A)(function*(){r.haptics.hapticsImpactLight()})()}getOTP(){var u,r=this;this.haptics.hapticsImpactLight(),this.submitted=!0,this.form.valid&&(console.log(this.form.value),this.logic.login(this.form.value).subscribe({next:(u=(0,p.A)(function*(d){console.log(d),r.submitted=!1;let g=d.data._id,h=d.data.accessToken;console.log(g),console.log(h),yield r.data.set("userId",g),yield r.data.set("accessToken",h),yield r.data.set("profileUpdated","0"),r.logic.init(),r.router.navigate(["story"])}),function(g){return u.apply(this,arguments)}),error:u=>{console.log(u),this.submitted=!1}}))}onReset(){this.submitted=!1,this.form.reset()}}return(t=n).\u0275fac=function(r){return new(r||t)(e.rXU(v.Ix),e.rXU(L.u),e.rXU(C.o),e.rXU(a.Xi),e.rXU(x.W),e.rXU(a.K_),e.rXU(l.ok))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],viewQuery:function(r,u){if(1&r&&e.GBs(s,5),2&r){let d;e.mGM(d=e.lsd())&&(u.input=d.first)}},decls:29,vars:4,consts:[["input",""],[1,"ion-padding",3,"fullscreen"],[1,"Login_Container","ion-margin-top"],[1,"animate__animated","animate__slideInUp"],[1,"text-container"],[1,"brand"],[1,"lato-black","brand-text"],[1,"dark-text"],[1,"light-text"],[3,"formGroup"],[1,"line"],[1,"input-text"],["type","tel","fill","solid","lines","none","mode","md","label","Mobile number","labelPlacement","stacked","formControlName","phoneNumber","counter","true","maxlength","10","helperText","Securing your personal information is our priority"],["slot","start","name","call","aria-hidden","true"],["class","button-div",4,"ngIf"],[1,"ion-no-border","animate__animated","animate__slideInUp"],["color","light",1,"ion-no-border"],["color","dark",1,"ion-text-center"],[2,"font-size","12px","text-align","center"],[1,"button-div"],["color","primary","expand","block","fill","solid","mode","ios",1,"animate__animated","animate__slideInUp",3,"click","disabled"],["slot","end","name","arrow-forward",1,"animate__animated","animate__shakeX","animate__infinite","slow"],["name","lines"]],template:function(r,u){1&r&&(e.j41(0,"ion-content",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"p",6),e.EFF(6,"Breezy"),e.k0s(),e.j41(7,"p",7),e.EFF(8,"Hi!\u{1f44b} Welcome to Breezy."),e.k0s(),e.j41(9,"p",8),e.EFF(10,"Create your account or Log in."),e.k0s()()(),e.nrm(11,"br"),e.j41(12,"form",9)(13,"div",10)(14,"p",11),e.EFF(15,"Enter your phone number"),e.k0s()(),e.j41(16,"ion-input",12,0),e.nrm(18,"ion-icon",13),e.k0s(),e.nrm(19,"br"),e.k0s()(),e.DNE(20,f,4,1,"div",14)(21,P,3,1,"div",14),e.k0s()(),e.j41(22,"ion-footer",15)(23,"ion-toolbar",16)(24,"ion-text",17)(25,"ion-label",18),e.EFF(26,"By login, you agree to our "),e.j41(27,"strong"),e.EFF(28,"terms and conditions."),e.k0s()()()()()),2&r&&(e.Y8G("fullscreen",!1),e.R7$(12),e.Y8G("formGroup",u.form),e.R7$(8),e.Y8G("ngIf",!u.submitted),e.R7$(),e.Y8G("ngIf",u.submitted))},dependencies:[m.bT,l.qT,l.BC,l.cb,l.tU,l.j4,l.JD,a.Jm,a.W9,a.M0,a.iq,a.$w,a.he,a.w2,a.IO,a.ai,a.Gw],styles:[".Login_Container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:100%;width:100%;flex-direction:column;padding:30px}.Login_Container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:auto;margin-top:30%}.formCls[_ngcontent-%COMP%]{margin-top:20px}.Input_num[_ngcontent-%COMP%], .Input_num[_ngcontent-%COMP%]:hover{--border-color: var(--ion-color-success, #21AD4B)}.Login_Form[_ngcontent-%COMP%]{margin-top:10%}.show-error[_ngcontent-%COMP%]{padding-top:.2rem;color:red;font-size:12px}.Login_text[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.input-text[_ngcontent-%COMP%]{font-size:14px;font-weight:300}ion-text[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:center}.button-div[_ngcontent-%COMP%]{width:100vw;padding:20px}.brand[_ngcontent-%COMP%] > .brand-text[_ngcontent-%COMP%]{font-size:2rem;color:var(--ion-color-primary);font-weight:700;margin:10px 0}ion-input[_ngcontent-%COMP%]{--border-radius: 12px}"]}),n})()}];let b=(()=>{var t;class n{}return(t=n).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[v.iI.forChild(c),v.iI]}),n})(),R=(()=>{var t;class n{}return(t=n).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[m.MD,l.YN,l.X1,a.bv,b]}),n})()},8786:($,y,i)=>{i.d(y,{W:()=>j});var m=i(467),l=i(1626),a=i(4412),v=i(8810),p=i(8141),e=i(9437),L=i(7673),C=i(7468),x=i(6354);const s_URL="https://api.breezyemart.com/api/v1/";var f=i(3953),P=i(8490);let j=(()=>{var c;class b{constructor(t,n){this.http=t,this.storage=n,this.categories=[],this.address=[],this.laundriesByCategory=[],this.services=[],this.allLaundries=[],this.accessToken=new a.t(""),this.userId=new a.t(""),this.userProfileUpdated=new a.t(""),this.categoriesSubject=new a.t(this.categories),this.category$=this.categoriesSubject.asObservable(),this.addressSubject=new a.t(this.address),this.address$=this.addressSubject.asObservable(),this.laundriesByCategorySubject=new a.t([]),this.laundryByCategory$=this.laundriesByCategorySubject.asObservable(),this.servicesSubject=new a.t([]),this.allLaundriesSubject=new a.t([]),this.laundry$=this.allLaundriesSubject.asObservable(),this.init()}init(){var t=this;return(0,m.A)(function*(){let n=yield t.storage.get("accessToken"),o=yield t.storage.get("userId"),r=yield t.storage.get("profileUpdated");t.accessToken.next(n),t.userId.next(o),t.userProfileUpdated.next(r)})()}handleError(t){return console.error("An error occurred:",t.message),(0,v.$)("Something went wrong; please try again later.")}getUserId(){var t=this;return(0,m.A)(function*(){const n=yield t.storage.get("userId");if(n)return n;throw new Error("User Not Found in local Storgare")})()}register(t){return this.http.post(s_URL+"partner/register",t)}login(t){return this.http.post(s_URL+"user/login",t)}logout(){return this.http.get(s_URL+`user/logout?userId=${this.userId.value}`)}getUserProfile(){return this.http.get(s_URL+`user/get-current-user?userId=${this.userId.value}`)}updateUserProfile(t){return this.http.put(s_URL+`user/update-profile?userId=${this.userId.value}`,t)}getAllCategories(){this.http.get(s_URL+"partner/category/getAll").pipe((0,p.M)(t=>{console.log(t),this.categoriesSubject.next(t)}),(0,e.W)(this.handleError)).subscribe()}getAllAddress(){return this.http.get(s_URL+`user/get/all-address/${this.userId.value}`)}addUserAddress(t){return this.http.post(s_URL+`user/add-address?userId=${this.userId.value}`,t)}getUserAddress(){return this.http.get(s_URL+`user/get/all-address/${this.userId.value}`)}getLaundryByCategory(t,n,o,r){let u=(new l.Nl).set("categoryId","66a7496d1f27b4f5fb506c1d").set("userId",r).set("latitude",t).set("longitude",n);this.http.get(s_URL+"partner/shop/get-all",{params:u}).pipe((0,p.M)(d=>{console.log(d),this.laundriesByCategorySubject.next(d)}),(0,e.W)(this.handleError)).subscribe()}getServiceByLaundry(){let t=(new l.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");this.http.get(s_URL+"partner/shop/get/by/category",{params:t}).pipe((0,p.M)(n=>{console.log(n),this.allLaundriesSubject.next(n)}),(0,e.W)(this.handleError)).subscribe()}getAllLaundries(){let t=(new l.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");return this.http.get(s_URL+"partner/shop/get-all",{params:t})}getServiceByLaundryId(t){return this.http.get(s_URL+`partner/service/get/shopId/${t}`)}getAllOffers(){return this.http.get(s_URL+"admin/promoCode/get-all")}like(t){return this.http.post(s_URL+`partner/shop/like/${t}/${this.userId.value}`,{})}unlike(t){return this.http.post(s_URL+`partner/shop/unlike/${t}/${this.userId.value}`,{})}addToCart(t,n,o){return console.log(`Quantity added is in htttp ${n}`),this.http.post(s_URL+"cart/add",{userId:this.userId.value,quantity:n,serviceId:t,selectedQuantityType:o})}removeFromCart(t,n){return this.http.post(s_URL+"cart/remove",{userId:this.userId.value.toString(),quantity:n,serviceId:t})}fetchCartAndServices(t){const n=this.http.get(s_URL+`cart/${this.userId.value}`).pipe((0,e.W)(r=>(console.error("Cart fetch error:",r),(0,L.of)({data:{products:[]}})))),o=this.http.get(s_URL+`partner/service/get/shopId/${t}`).pipe((0,e.W)(r=>(console.error("Services fetch error:",r),(0,L.of)({data:{content:[]}}))));return(0,C.p)([n,o]).pipe((0,x.T)(([r,u])=>{const d=r.data.products||[];return(u.data.content||[]).map(I=>{const U=d.find(M=>M.serviceId._id===I._id);return{...I,quantity:U?U.quantity:0}})}))}getCart(){return this.http.get(s_URL+`cart/${this.userId.value}`)}checkout(t){return this.http.post(s_URL+"order/initiate/payment",{amount:t},{headers:{"x-access-token":this.accessToken.value.toString()}})}calculateCartAmount(t){return this.http.post(s_URL+"order/calculate/amount-to-pay",{userId:this.userId.value,code:t},{headers:{"x-access-token":this.accessToken.value}})}placeOrder(t,n,o,r,u,d,g,h){return this.http.post(s_URL+"order/place",{userId:this.userId.value,dropoffAddressId:t,pickupAddressId:n,pickupTime:o,dropoffTime:r,selfService:u,priceDetails:d,orderType:g,products:h})}getAllUserOrders(){return this.http.get(s_URL+`order/get/order/${this.userId.value}`)}getUserSubscription(){return this.http.get(s_URL+"subscription/get/all-plans")}getSubscriptionByUserId(){return this.http.get(s_URL+`subscription/get/${this.userId.value}`)}purchaseSubscription(t,n){return this.http.post(s_URL+"subscription/purchase",{userId:this.userId.value,planId:t,paymentDetails:n})}}return(c=b).\u0275fac=function(t){return new(t||c)(f.KVO(l.Qq),f.KVO(P.u))},c.\u0275prov=f.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),b})()}}]);