"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3485],{3485:(I,P,i)=>{i.r(P),i.d(P,{LoginPageModule:()=>k});var b=i(177),l=i(9417),c=i(5374),f=i(5260),m=i(467),t=i(3953),C=i(8490),_=i(3455),v=i(8786);const r=["input"];function h(e,o){if(1&e){const a=t.RV6();t.j41(0,"div",38)(1,"ion-button",39),t.bIt("click",function(){t.eBV(a);const s=t.XpG();return t.Njj(s.getOTP())}),t.j41(2,"span",40),t.EFF(3,"Continue"),t.k0s(),t.nrm(4,"ion-icon",41),t.k0s()()}if(2&e){const a=t.XpG();t.R7$(),t.Y8G("disabled",a.form.invalid)}}function y(e,o){if(1&e){const a=t.RV6();t.j41(0,"div",38)(1,"ion-button",42),t.bIt("click",function(){t.eBV(a);const s=t.XpG();return t.Njj(s.getOTP())}),t.nrm(2,"ion-spinner",43),t.k0s()()}if(2&e){const a=t.XpG();t.R7$(),t.Y8G("disabled",a.form.invalid)}}const d=[{path:"",component:(()=>{var e;class o{constructor(n,s,g,u,p,O,x){this.router=n,this.data=s,this.haptics=g,this.LoadingCtrl=u,this.logic=p,this.toastController=O,this.formBuilder=x,this.form=l.gE,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({phoneNumber:["",[l.k0.required,l.k0.pattern("^((\\+91-?)|0)?[0-9]{10}$")]]})}ionViewDidEnter(){this.input.setFocus()}login(){var n=this;return(0,m.A)(function*(){n.haptics.hapticsImpactLight()})()}getOTP(){var s,n=this;this.haptics.hapticsImpactLight(),this.submitted=!0,this.form.valid&&(console.log(this.form.value),this.logic.login(this.form.value).subscribe({next:(s=(0,m.A)(function*(g){console.log(g),n.submitted=!1;let u=g.data._id,p=g.data.accessToken;console.log(u),console.log(p),yield n.data.set("userId",u),yield n.data.set("accessToken",p),yield n.data.set("profileUpdated","0"),n.logic.init(),n.router.navigate(["story"])}),function(u){return s.apply(this,arguments)}),error:s=>{console.log(s),this.submitted=!1}}))}onReset(){this.submitted=!1,this.form.reset()}}return(e=o).\u0275fac=function(n){return new(n||e)(t.rXU(f.Ix),t.rXU(C.u),t.rXU(_.o),t.rXU(c.Xi),t.rXU(v.W),t.rXU(c.K_),t.rXU(l.ok))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-login"]],viewQuery:function(n,s){if(1&n&&t.GBs(r,5),2&n){let g;t.mGM(g=t.lsd())&&(s.input=g.first)}},decls:48,vars:4,consts:[["input",""],[1,"premium-content",3,"fullscreen"],[1,"login-container"],[1,"background-pattern"],[1,"pattern-circle","circle-1"],[1,"pattern-circle","circle-2"],[1,"pattern-circle","circle-3"],[1,"login-form-container","animate__animated","animate__slideInUp"],[1,"brand-section"],[1,"brand-logo"],["name","shirt-outline",1,"logo-icon"],[1,"brand-text"],[1,"brand-title"],[1,"brand-subtitle"],[1,"welcome-section"],[1,"welcome-title"],[1,"welcome-subtitle"],[1,"welcome-description"],[1,"form-section"],[1,"premium-form",3,"formGroup"],[1,"form-field"],[1,"field-label"],["name","call-outline",1,"label-icon"],[1,"label-text"],["type","tel","fill","outline","lines","none","mode","ios","label","Mobile number","labelPlacement","stacked","formControlName","phoneNumber","counter","true","maxlength","10","helperText","Securing your personal information is our priority",1,"premium-input"],["slot","start","name","call","aria-hidden","true",1,"input-icon"],[1,"button-section"],["class","button-container",4,"ngIf"],[1,"security-note"],["name","shield-checkmark-outline",1,"security-icon"],[1,"security-text"],[1,"ion-no-border","premium-footer","animate__animated","animate__slideInUp"],[1,"premium-footer-toolbar"],[1,"footer-content"],["name","document-text-outline",1,"footer-icon"],[1,"footer-text"],[1,"footer-label"],[1,"terms-link"],[1,"button-container"],["color","primary","expand","block","fill","solid","mode","ios",1,"premium-button","animate__animated","animate__slideInUp",3,"click","disabled"],[1,"button-text"],["slot","end","name","arrow-forward",1,"animate__animated","animate__shakeX","animate__infinite","slow","button-icon"],["color","primary","expand","block","fill","solid","mode","ios",1,"premium-button","loading-button","animate__animated","animate__slideInUp",3,"click","disabled"],["name","lines",1,"loading-spinner"]],template:function(n,s){1&n&&(t.j41(0,"ion-content",1)(1,"div",2)(2,"div",3),t.nrm(3,"div",4)(4,"div",5)(5,"div",6),t.k0s(),t.j41(6,"div",7)(7,"div",8)(8,"div",9),t.nrm(9,"ion-icon",10),t.k0s(),t.j41(10,"div",11)(11,"h1",12),t.EFF(12,"Breezy"),t.k0s(),t.j41(13,"p",13),t.EFF(14,"Premium Laundry Service"),t.k0s()()(),t.j41(15,"div",14)(16,"h2",15),t.EFF(17,"Hi! \u{1f44b}"),t.k0s(),t.j41(18,"p",16),t.EFF(19,"Welcome to Breezy"),t.k0s(),t.j41(20,"p",17),t.EFF(21," Create your account or Log in to get started "),t.k0s()(),t.j41(22,"div",18)(23,"form",19)(24,"div",20)(25,"div",21),t.nrm(26,"ion-icon",22),t.j41(27,"span",23),t.EFF(28,"Enter your phone number"),t.k0s()(),t.j41(29,"ion-input",24,0),t.nrm(31,"ion-icon",25),t.k0s()()()(),t.j41(32,"div",26),t.DNE(33,h,5,1,"div",27)(34,y,3,1,"div",27),t.k0s(),t.j41(35,"div",28),t.nrm(36,"ion-icon",29),t.j41(37,"p",30),t.EFF(38,"Your data is encrypted and secure"),t.k0s()()()()(),t.j41(39,"ion-footer",31)(40,"ion-toolbar",32)(41,"div",33),t.nrm(42,"ion-icon",34),t.j41(43,"ion-text",35)(44,"ion-label",36),t.EFF(45," By logging in, you agree to our "),t.j41(46,"strong",37),t.EFF(47,"Terms and Conditions"),t.k0s()()()()()()),2&n&&(t.Y8G("fullscreen",!1),t.R7$(23),t.Y8G("formGroup",s.form),t.R7$(10),t.Y8G("ngIf",!s.submitted),t.R7$(),t.Y8G("ngIf",s.submitted))},dependencies:[b.bT,l.qT,l.BC,l.cb,l.tU,l.j4,l.JD,c.Jm,c.W9,c.M0,c.iq,c.$w,c.he,c.w2,c.IO,c.ai,c.Gw],styles:['.premium-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);--color: #1e293b;padding:0;position:relative;overflow:hidden}.background-pattern[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none;z-index:1}.background-pattern[_ngcontent-%COMP%]   .pattern-circle[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:linear-gradient(135deg,#8b5cf61a,#3b82f61a);animation:_ngcontent-%COMP%_float 8s ease-in-out infinite}.background-pattern[_ngcontent-%COMP%]   .pattern-circle.circle-1[_ngcontent-%COMP%]{width:200px;height:200px;top:-100px;right:-100px;animation-delay:0s}.background-pattern[_ngcontent-%COMP%]   .pattern-circle.circle-2[_ngcontent-%COMP%]{width:150px;height:150px;bottom:-75px;left:-75px;animation-delay:2s}.background-pattern[_ngcontent-%COMP%]   .pattern-circle.circle-3[_ngcontent-%COMP%]{width:100px;height:100px;top:50%;right:10%;animation-delay:4s}.login-container[_ngcontent-%COMP%]{position:relative;z-index:2;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:24px;overflow:hidden}.login-form-container[_ngcontent-%COMP%]{width:100%;max-width:400px;background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:32px;padding:40px 32px;box-shadow:0 8px 32px #0000001a;border:1px solid rgba(148,163,184,.1);text-align:center;animation:_ngcontent-%COMP%_formSlideIn .8s cubic-bezier(.4,0,.2,1);max-height:90vh;overflow-y:auto}.brand-section[_ngcontent-%COMP%]{margin-bottom:32px}.brand-section[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(135deg,#8b5cf6,#3b82f6);border-radius:24px;display:flex;align-items:center;justify-content:center;margin:0 auto 20px;box-shadow:0 8px 24px #8b5cf64d;animation:_ngcontent-%COMP%_logoGlow 3s ease-in-out infinite alternate}.brand-section[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:40px;color:#fff}.brand-section[_ngcontent-%COMP%]   .brand-text[_ngcontent-%COMP%]   .brand-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;color:#1e293b;margin:0 0 8px;background:linear-gradient(135deg,#8b5cf6,#3b82f6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:1px}.brand-section[_ngcontent-%COMP%]   .brand-text[_ngcontent-%COMP%]   .brand-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#6b7280;margin:0;font-weight:500;letter-spacing:.5px}.welcome-section[_ngcontent-%COMP%]{margin-bottom:32px}.welcome-section[_ngcontent-%COMP%]   .welcome-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1e293b;margin:0 0 8px}.welcome-section[_ngcontent-%COMP%]   .welcome-subtitle[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#374151;margin:0 0 8px}.welcome-section[_ngcontent-%COMP%]   .welcome-description[_ngcontent-%COMP%]{font-size:1rem;color:#6b7280;margin:0;line-height:1.5}.form-section[_ngcontent-%COMP%]{margin-bottom:32px}.premium-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;justify-content:flex-start}.premium-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]   .label-icon[_ngcontent-%COMP%]{font-size:18px;color:#8b5cf6}.premium-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:#374151}.premium-input[_ngcontent-%COMP%]{--background: rgba(248, 250, 252, .8);--border-color: transparent;--border-color-hover: transparent;--border-color-focus: transparent;--border-radius: 16px;--border-width: 0;--color: #1e293b;--color-focused: #1e293b;--label-color: #6b7280;--label-color-focused: #8b5cf6;--padding-start: 16px;--padding-end: 16px;--padding-top: 16px;--padding-bottom: 16px;--placeholder-color: #9ca3af;--placeholder-opacity: .7;--highlight-color: rgba(139, 92, 246, .1);transition:all .3s cubic-bezier(.4,0,.2,1)}.premium-input[_ngcontent-%COMP%]:hover{--background: rgba(139, 92, 246, .05);transform:translateY(-2px);box-shadow:0 4px 16px #8b5cf61a}.premium-input[_ngcontent-%COMP%]:focus-within{--background: rgba(139, 92, 246, .08);transform:translateY(-2px);box-shadow:0 8px 24px #8b5cf626}.premium-input[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{font-size:20px;color:#8b5cf6;margin-right:8px}.button-section[_ngcontent-%COMP%]{margin-bottom:24px}.button-container[_ngcontent-%COMP%]   .premium-button[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%);--background-hover: linear-gradient(135deg, #7c3aed 0%, #2563eb 100%);--background-activated: linear-gradient(135deg, #7c3aed 0%, #2563eb 100%);--background-disabled: rgba(148, 163, 184, .3);--color: white;--color-hover: white;--color-activated: white;--color-disabled: rgba(255, 255, 255, .7);--border-radius: 20px;--padding-start: 24px;--padding-end: 24px;--padding-top: 16px;--padding-bottom: 16px;--box-shadow: 0 4px 16px rgba(139, 92, 246, .3);--box-shadow-hover: 0 8px 24px rgba(139, 92, 246, .4);--box-shadow-activated: 0 4px 16px rgba(139, 92, 246, .3);font-weight:700;font-size:1.1rem;letter-spacing:.5px;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.button-container[_ngcontent-%COMP%]   .premium-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease}.button-container[_ngcontent-%COMP%]   .premium-button[_ngcontent-%COMP%]:hover:before{left:100%}.button-container[_ngcontent-%COMP%]   .premium-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);--box-shadow: 0 8px 24px rgba(139, 92, 246, .4)}.button-container[_ngcontent-%COMP%]   .premium-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.button-container[_ngcontent-%COMP%]   .premium-button[_ngcontent-%COMP%]:disabled{transform:none;--box-shadow: none}.button-container[_ngcontent-%COMP%]   .premium-button[_ngcontent-%COMP%]   .button-text[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px}.button-container[_ngcontent-%COMP%]   .premium-button[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%]{font-size:20px;margin-left:8px}.button-container[_ngcontent-%COMP%]   .loading-button[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%)}.button-container[_ngcontent-%COMP%]   .loading-button[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{--color: white}.security-note[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:16px;background:#10b9811a;border:1px solid rgba(16,185,129,.2);border-radius:16px;margin-bottom:16px}.security-note[_ngcontent-%COMP%]   .security-icon[_ngcontent-%COMP%]{font-size:18px;color:#059669}.security-note[_ngcontent-%COMP%]   .security-text[_ngcontent-%COMP%]{font-size:.85rem;color:#059669;font-weight:600;margin:0}.premium-footer[_ngcontent-%COMP%]{--background: transparent;position:relative;z-index:2}.premium-footer-toolbar[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .95);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-top:1px solid rgba(148,163,184,.1);--border-color: transparent;--padding-top: 16px;--padding-bottom: 16px}.footer-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;text-align:center}.footer-content[_ngcontent-%COMP%]   .footer-icon[_ngcontent-%COMP%]{font-size:16px;color:#8b5cf6}.footer-content[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]   .footer-label[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280;line-height:1.4}.footer-content[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]   .footer-label[_ngcontent-%COMP%]   .terms-link[_ngcontent-%COMP%]{color:#8b5cf6;font-weight:600;text-decoration:none;transition:color .3s ease}.footer-content[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]   .footer-label[_ngcontent-%COMP%]   .terms-link[_ngcontent-%COMP%]:hover{color:#7c3aed}@keyframes _ngcontent-%COMP%_formSlideIn{0%{opacity:0;transform:translateY(40px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_logoGlow{0%{box-shadow:0 8px 24px #8b5cf64d}to{box-shadow:0 8px 32px #8b5cf680}}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-20px) rotate(180deg)}}@keyframes _ngcontent-%COMP%_buttonShimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}.premium-input[_ngcontent-%COMP%]:focus-within   .input-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_iconPulse .6s ease-in-out}@keyframes _ngcontent-%COMP%_iconPulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:16px;height:100vh}.login-form-container[_ngcontent-%COMP%]{padding:32px 24px;border-radius:24px;max-height:85vh}.brand-section[_ngcontent-%COMP%]{margin-bottom:24px}.brand-section[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:20px}.brand-section[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:32px}.brand-section[_ngcontent-%COMP%]   .brand-text[_ngcontent-%COMP%]   .brand-title[_ngcontent-%COMP%]{font-size:2rem}.brand-section[_ngcontent-%COMP%]   .brand-text[_ngcontent-%COMP%]   .brand-subtitle[_ngcontent-%COMP%]{font-size:.9rem}.welcome-section[_ngcontent-%COMP%]{margin-bottom:24px}.welcome-section[_ngcontent-%COMP%]   .welcome-title[_ngcontent-%COMP%]{font-size:1.5rem}.welcome-section[_ngcontent-%COMP%]   .welcome-subtitle[_ngcontent-%COMP%]{font-size:1.1rem}.welcome-section[_ngcontent-%COMP%]   .welcome-description[_ngcontent-%COMP%]{font-size:.9rem}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.button-section[_ngcontent-%COMP%]{margin-bottom:20px}.premium-button[_ngcontent-%COMP%]{--padding-start: 20px;--padding-end: 20px;--padding-top: 14px;--padding-bottom: 14px;font-size:1rem}.security-note[_ngcontent-%COMP%]{padding:12px;margin-bottom:12px}.security-note[_ngcontent-%COMP%]   .security-text[_ngcontent-%COMP%]{font-size:.8rem}.premium-footer-toolbar[_ngcontent-%COMP%]{--padding-top: 12px;--padding-bottom: 12px}.footer-content[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]   .footer-label[_ngcontent-%COMP%]{font-size:.75rem}}@media (prefers-color-scheme: dark){.premium-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);--color: #f1f5f9}.background-pattern[_ngcontent-%COMP%]   .pattern-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf626,#3b82f626)}.login-form-container[_ngcontent-%COMP%]{background:#0f172af2;border-color:#94a3b833}.brand-section[_ngcontent-%COMP%]   .brand-text[_ngcontent-%COMP%]   .brand-title[_ngcontent-%COMP%]{color:#f1f5f9}.brand-section[_ngcontent-%COMP%]   .brand-text[_ngcontent-%COMP%]   .brand-subtitle[_ngcontent-%COMP%]{color:#9ca3af}.welcome-section[_ngcontent-%COMP%]   .welcome-title[_ngcontent-%COMP%]{color:#f1f5f9}.welcome-section[_ngcontent-%COMP%]   .welcome-subtitle[_ngcontent-%COMP%]{color:#d1d5db}.welcome-section[_ngcontent-%COMP%]   .welcome-description[_ngcontent-%COMP%]{color:#9ca3af}.premium-input[_ngcontent-%COMP%]{--background: rgba(15, 23, 42, .8);--color: #f1f5f9;--label-color: #9ca3af;--label-color-focused: #a78bfa;--placeholder-color: #6b7280}.premium-input[_ngcontent-%COMP%]:hover{--background: rgba(139, 92, 246, .1)}.premium-input[_ngcontent-%COMP%]:focus-within{--background: rgba(139, 92, 246, .15)}.form-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#d1d5db}.security-note[_ngcontent-%COMP%]{background:#10b98126;border-color:#10b9814d}.premium-footer-toolbar[_ngcontent-%COMP%]{--background: rgba(15, 23, 42, .95);border-top-color:#94a3b833}.footer-content[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]   .footer-label[_ngcontent-%COMP%]{color:#9ca3af}.footer-content[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]   .footer-label[_ngcontent-%COMP%]   .terms-link[_ngcontent-%COMP%]{color:#a78bfa}.footer-content[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]   .footer-label[_ngcontent-%COMP%]   .terms-link[_ngcontent-%COMP%]:hover{color:#c4b5fd}}.premium-input[_ngcontent-%COMP%]:focus-within, .premium-button[_ngcontent-%COMP%]:focus{outline:2px solid rgba(139,92,246,.5);outline-offset:2px}.premium-button[_ngcontent-%COMP%]:hover{cursor:pointer}.premium-input[_ngcontent-%COMP%], .premium-button[_ngcontent-%COMP%], .terms-link[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.loading-button[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.premium-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.7}.premium-input.ion-invalid[_ngcontent-%COMP%]{--background: rgba(239, 68, 68, .1)}.premium-input.ion-valid[_ngcontent-%COMP%]{--background: rgba(16, 185, 129, .1)}']}),o})()}];let M=(()=>{var e;class o{}return(e=o).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[f.iI.forChild(d),f.iI]}),o})(),k=(()=>{var e;class o{}return(e=o).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[b.MD,l.YN,l.X1,c.bv,M]}),o})()},8786:(I,P,i)=>{i.d(P,{W:()=>w});var b=i(467),l=i(1626),c=i(4412),f=i(8810),m=i(8141),t=i(9437),C=i(7673),_=i(7468),v=i(6354);const r_URL="http://localhost:3000/api/v1/";var h=i(3953),y=i(8490);let w=(()=>{var d;class M{constructor(e,o){this.http=e,this.storage=o,this.categories=[],this.address=[],this.laundriesByCategory=[],this.services=[],this.allLaundries=[],this.accessToken=new c.t(""),this.userId=new c.t(""),this.userProfileUpdated=new c.t(""),this.categoriesSubject=new c.t(this.categories),this.category$=this.categoriesSubject.asObservable(),this.addressSubject=new c.t(this.address),this.address$=this.addressSubject.asObservable(),this.laundriesByCategorySubject=new c.t([]),this.laundryByCategory$=this.laundriesByCategorySubject.asObservable(),this.servicesSubject=new c.t([]),this.allLaundriesSubject=new c.t([]),this.laundry$=this.allLaundriesSubject.asObservable(),this.init()}init(){var e=this;return(0,b.A)(function*(){let o=yield e.storage.get("accessToken"),a=yield e.storage.get("userId"),n=yield e.storage.get("profileUpdated");e.accessToken.next(o),e.userId.next(a),e.userProfileUpdated.next(n)})()}handleError(e){return console.error("An error occurred:",e.message),(0,f.$)("Something went wrong; please try again later.")}getUserId(){var e=this;return(0,b.A)(function*(){const o=yield e.storage.get("userId");if(o)return o;throw new Error("User Not Found in local Storgare")})()}register(e){return this.http.post(r_URL+"partner/register",e)}login(e){return this.http.post(r_URL+"user/login",e)}logout(){return this.http.get(r_URL+`user/logout?userId=${this.userId.value}`)}getUserProfile(){return this.http.get(r_URL+`user/get-current-user?userId=${this.userId.value}`)}updateUserProfile(e){return this.http.put(r_URL+`user/update-profile?userId=${this.userId.value}`,e)}getAllCategories(){this.http.get(r_URL+"partner/category/getAll").pipe((0,m.M)(e=>{console.log(e),this.categoriesSubject.next(e)}),(0,t.W)(this.handleError)).subscribe()}getAllAddress(){return this.http.get(r_URL+`user/get/all-address/${this.userId.value}`)}addUserAddress(e){return this.http.post(r_URL+`user/add-address?userId=${this.userId.value}`,e)}getUserAddress(){return this.http.get(r_URL+`user/get/all-address/${this.userId.value}`)}getLaundryByCategory(e,o,a,n){let s=(new l.Nl).set("categoryId","66a7496d1f27b4f5fb506c1d").set("userId",n).set("latitude",e).set("longitude",o);this.http.get(r_URL+"partner/shop/get-all",{params:s}).pipe((0,m.M)(g=>{console.log(g),this.laundriesByCategorySubject.next(g)}),(0,t.W)(this.handleError)).subscribe()}getServiceByLaundry(){let e=(new l.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");this.http.get(r_URL+"partner/shop/get/by/category",{params:e}).pipe((0,m.M)(o=>{console.log(o),this.allLaundriesSubject.next(o)}),(0,t.W)(this.handleError)).subscribe()}getAllLaundries(){let e=(new l.Nl).set("search","").set("latitude","18.5925785").set("longitude","73.7183639");return this.http.get(r_URL+"partner/shop/get-all",{params:e})}getServiceByLaundryId(e){return this.http.get(r_URL+`partner/service/get/shopId/${e}`)}getAllOffers(){return this.http.get(r_URL+"admin/promoCode/get-all")}like(e){return this.http.post(r_URL+`partner/shop/like/${e}/${this.userId.value}`,{})}unlike(e){return this.http.post(r_URL+`partner/shop/unlike/${e}/${this.userId.value}`,{})}addToCart(e,o,a){return console.log(`Quantity added is in htttp ${o}`),this.http.post(r_URL+"cart/add",{userId:this.userId.value,quantity:o,serviceId:e,selectedQuantityType:a})}removeFromCart(e,o){return this.http.post(r_URL+"cart/remove",{userId:this.userId.value.toString(),quantity:o,serviceId:e})}fetchCartAndServices(e){const o=this.http.get(r_URL+`cart/${this.userId.value}`).pipe((0,t.W)(n=>(console.error("Cart fetch error:",n),(0,C.of)({data:{products:[]}})))),a=this.http.get(r_URL+`partner/service/get/shopId/${e}`).pipe((0,t.W)(n=>(console.error("Services fetch error:",n),(0,C.of)({data:{content:[]}}))));return(0,_.p)([o,a]).pipe((0,v.T)(([n,s])=>{const g=n.data.products||[];return(s.data.content||[]).map(O=>{const x=g.find(L=>L.serviceId._id===O._id);return{...O,quantity:x?x.quantity:0}})}))}getCart(){return this.http.get(r_URL+`cart/${this.userId.value}`)}checkout(e){return this.http.post(r_URL+"order/initiate/payment",{amount:e},{headers:{"x-access-token":this.accessToken.value.toString()}})}calculateCartAmount(e){return this.http.post(r_URL+"order/calculate/amount-to-pay",{userId:this.userId.value,code:e},{headers:{"x-access-token":this.accessToken.value}})}placeOrder(e,o,a,n,s,g,u,p){return this.http.post(r_URL+"order/place",{userId:this.userId.value,dropoffAddressId:e,pickupAddressId:o,pickupTime:a,dropoffTime:n,selfService:s,priceDetails:g,orderType:u,products:p})}getAllUserOrders(){return this.http.get(r_URL+`order/get/order/${this.userId.value}`)}getUserSubscription(){return this.http.get(r_URL+"subscription/get/all-plans")}getSubscriptionByUserId(){return this.http.get(r_URL+`subscription/get/${this.userId.value}`)}purchaseSubscription(e,o){return this.http.post(r_URL+"subscription/purchase",{userId:this.userId.value,planId:e,paymentDetails:o})}}return(d=M).\u0275fac=function(e){return new(e||d)(h.KVO(l.Qq),h.KVO(y.u))},d.\u0275prov=h.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),M})()}}]);